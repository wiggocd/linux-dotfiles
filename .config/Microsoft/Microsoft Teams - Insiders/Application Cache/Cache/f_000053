webpackJsonp([12],{22:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RetryState=teamspace.services.RetryState,t.EntityCommandErrorCode=teamspace.services.commanding.EntityCommandErrorCode,t.CommandEvent=teamspace.services.commanding.CommandEvent,t.StaticTabId=teamspace.services.commanding.StaticTabId,t.ChildWindowEventRequest=teamspace.services.ChildWindowEventRequest},2334:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2335),n(2339),n(2348)},2335:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2336),i=n(2338),o=function(){function e(e,t,n,r,i,o){this.loggingService=e,this.$window=t,this.constants=n,this.utilityService=r,this.desktopUtilityService=i,this.eventingService=o,this.logger=e.newLogger(n.experienceContainers.log.prefix+"ExperienceContainerFactory")}return e.$inject=["loggingService","$window","constants","utilityService","desktopUtilityService","eventingService"],e.prototype.generateContainerId=function(){return"experience-container-"+this.utilityService.generateUUID()},e.prototype.create=function(e){this.logger.log("creating experience container");var t=this.generateContainerId(),n=this.desktopUtilityService.isElectron(),o=this.loggingService.findScenario(this.constants.experienceContainers.scenarios.init),a=this.constants.experienceContainers.step.factoryCreate;return o&&o.mark(a,{isElectron:n}),this.loggingService.setContext("ecState",a),n?(this.logger.info("Creating WebView experience container: "+t,e),new i.WebViewExperienceContainer(this.loggingService,t,e,this.$window,this.constants,this.eventingService)):(this.logger.info("Creating IFrame experience container: "+t,e),new r.IframeExperienceContainer(this.loggingService,t,e,this.$window,this.constants))},e}();t.ExperienceContainerFactory=o,angular.module("teamspace.experienceContainerFactory",["teamspace.loggingService","teamspace.constants","teamspace.utilityService","teamspace.desktopUtilityService"]).service("experienceContainerFactory",o)},2336:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var s=n(59),u=function(e){function t(t,n,r,i,o){var a=e.call(this,t.newLogger(o.experienceContainers.log.prefix+"IframeExperienceContainer"),n,r,o,i)||this,s=new URL(r.url);return a.origin=s.origin,a}return r(t,e),t.prototype.createElement=function(e){var t=this,n=s.htmlFactory.createIframe(this.elementId);return n.src=e,n.setAttribute("class","embedded-electron-webview embedded-page-content"),this.$window.addEventListener("message",function(e){var r=e.source,i=e.origin,o=e.data,a=o.channel,s=o.payload;r===n.contentWindow&&i===t.origin&&a===t.constants.multiWindow.channel&&t._handleExperienceContainerEvent(s)}),n},t.prototype.appendTo=function(t){var n=this;return this.element?new Promise(function(r){n.updateTMPStorageSettings(),r(e.prototype.appendTo.call(n,t))}):Promise.reject("unable to mount")},t.prototype.setTimeout=function(e){return void 0===e&&(e=0),o(this,void 0,void 0,function(){return a(this,function(e){return[2,Promise.resolve()]})})},t.prototype.updateTMPStorageSettings=function(){var e=JSON.parse(this.$window.localStorage.getItem("tmp.settings")),t=e&&e.core||{},n=e&&e.host||{},r=this.params.settings.hostSettings,o=r&&r.core||{},a=r&&r.hostSettings||{};e=JSON.stringify(i({},e,{core:i({},t,o),host:i({},n,o,a)})),this.$window.localStorage.setItem("tmp.settings",e)},t.prototype._postMessage=function(e){var t=i({},e,{channel:this.constants.multiWindow.channel,metaData:{destination:{channel:e.eventId}}});this.element.contentWindow.postMessage(t,this.origin)},t}(n(236).ExperienceContainer);t.IframeExperienceContainer=u},2337:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.logger=e,this.handlers=new Map}return e.prototype.publish=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.handlers.get(e)||[];this.logger.debug("Publishing event "+e+" to "+i.length+" subscribers with following args",n),i.forEach(function(e){try{e.apply(void 0,n)}catch(e){t.logger.warn("Unable to publish event to handler because it threw the following error: "+e)}})},e.prototype.addEventListener=function(e,t){var n=this.handlers.get(e)||[];n.push(t),this.handlers.set(e,n)},e.prototype.removeEventListener=function(e,t){var n=this.handlers.get(e)||[];n=n.filter(function(e){return e!==t}),this.handlers.set(e,n)},e}();t.EventPublisher=r},2338:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(59),s=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t.newLogger(o.experienceContainers.log.prefix+"WebViewExperienceContainer"),n,r,o,i)||this;return s.eventingService=a,s}return r(t,e),t.prototype.createElement=function(e){var t=this;try{var n=a.htmlFactory.createWebView(this.elementId);return n.src=e,n.setAttribute("class","embedded-electron-webview embedded-page-content"),n.setAttribute("webpreferences","nativeWindowOpen=yes, sandbox=yes"),n.setAttribute("allowpopups",""),n.addEventListener("ipc-message",function(e){if(e.channel===t.constants.experienceContainers.channel){var n=e.args&&e.args[0];t._handleExperienceContainerEvent(n)}}),n.addEventListener("crashed",function(){t.logger.error("Experience container with Id "+t.elementId+" has crashed"),t.eventingService.$emit(t.constants.events.experienceContainers.crashed,{id:t.elementId}),t.publish("crashed")}),this.$window.electronSafeIpc.on("experience-renderer-crash",function(e,n){t.logger.info("experience renderer crash incoming from desktop"),t.logger.info("crash metadata: "+JSON.stringify(n))}),n.addEventListener("did-fail-load",function(e){t.logger.error("Experience container with Id "+t.elementId+" failed to load. Url="+t.params.url+" Error="+e.errorDescription+" ("+e.errorCode+")"),t.publish("failed-to-load",e)}),n.addEventListener("did-navigate",function(e){var n=e.httpResponseCode,r=t.constants.responseCode;t.logger.info("Experience container with Id "+t.elementId+" did navigate with "+n+". Url="+t.params.url),-1!==n&&n!==r.ok&&t.publish("failed-to-navigate",e)}),n}catch(e){this.logger.error("Experience container with Id "+this.elementId+" loading exception: "+e);var r=this.logger.service.findScenario(this.constants.experienceContainers.scenarios.init);throw r&&r.fail({reason:this.constants.experienceContainers.reason.webViewEcCreateElementFailed}),e}},t.prototype.appendTo=function(t){var n=this;return this.element?new Promise(function(r,i){var o={enablePreload:!0,isExperienceRenderer:!0,rendererContext:JSON.stringify(n.params.settings||{})},a=n.$window.setTimeout(function(){n.logger.error("Timed out waiting for IPC response webViewCreationEnabled"),i({reason:n.constants.experienceContainers.reason.timeoutWebViewCreationEnabled})},n.constants.experienceContainers.timers.ipcWebViewCreationEnabledTimeout);n.$window.electronSafeIpc.once(n.constants.events.desktopApp.webViewCreationEnabled,function(){n.logger.info("Received webViewCreationEnabled event, Appending webview element to the page"),n.$window.clearTimeout(a),e.prototype.appendTo.call(n,t).then(r).catch(function(e){n.logger.warn("Failed to append webview element to the page: "+e),i({reason:e})})});try{n.$window.electronSafeIpc.send(n.constants.events.desktopApp.allowWebViewCreate,o)}catch(e){n.logger.error("Failed to send electronSafeIpc - elementId="+n.elementId+": "+e),i({reason:n.constants.experienceContainers.reason.ipcAllowWebViewCreateError,errorCode:e})}}):Promise.reject({reason:this.constants.experienceContainers.reason.webViewEcAppendToNoElement})},t.prototype.setTimeout=function(e){return void 0===e&&(e=0),i(this,void 0,void 0,function(){return o(this,function(t){return[2,this.element.executeJavaScript("\n      // Added by the host to receive a callback when the js queue of this context is empty.\n      (function() {\n        return new Promise((resolve) => {\n          window.setTimeout(() => {\n            resolve();\n          }, "+e+");\n        })\n      })(window);\n    ")]})})},t.prototype._postMessage=function(e){this.element.send(this.constants.experienceContainers.channel,e)},t}(n(236).ExperienceContainer);t.WebViewExperienceContainer=s},2339:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(59),a=n(2340),s=n(2342),u=n(2344),c=n(73),l=function(e){function t(t,n,r,o,s,c,l,f,h,p,d,g,v,y){var m=e.call(this,t)||this;return m.loggingService=n,m.experienceContainerFactory=r,m.constants=o,m.desktopUtilityService=s,m.settingsService=c,m.experienceContainerFeatureService=l,m.experienceContainerCdlCommunicator=f,m.$window=d,m.isCreatingContainer=!1,m.wrapOnReadyCallback=function(){m.isCreatingContainer=!1,m.onReadyCallback&&m.onReadyCallback()},m.onTearDown=function(e,t){m.logger.warn("Tearing down "+e.experienceContainer.elementId+" because it has "+t.reason+"."),m.settingsService.valueAsBoolean(m.constants.settings.names.enableAutoBRBforERCrashes)&&e.params&&e.params.url&&e.params.url.includes("teams.microsoft.com/")&&"crashed"===t.reason&&0===m.retryManager.recreateAttempts&&m.logger.error("MultiWindow ExperienceRenderer Crashed or Failed to Load, so triggering AutoBRB"),m.remove(e,t),m.shouldRetry(t)},m.onShouldRetry=function(e){var t=m.loggingService.findScenario(m.constants.experienceContainers.scenarios.init)||m.loggingService.newScenario(m.constants.experienceContainers.scenarios.retryInit),n=m.constants.experienceContainers.step.onTearDownRecreate;t&&t.mark(n,i({recreateAttempts:m.retryManager.recreateAttempts,reason:e.reason},e.data)),m.loggingService.setContext("ecState",n),m.initInternal(t)},m.onShouldRetryFailure=function(e,t){m.logger.info("Retry failed. We tried to retry "+m.retryManager.recreateAttempts+" times. Retry failure: "+e+". Retry reason: "+t.reason),e===u.RETRY_FAILURES.FAILED&&(m.isCreatingContainer=!1,m.markTearDownScenario(t,m.retryManager.recreateAttempts))},m.mountElement=m.createAndMountElement(),m.serviceWrapper=new a.AngularServiceWrapper(o,g,d,v,y),m.serviceWrapper.initialize(),m.logger=n.newLogger(o.experienceContainers.log.prefix+"ExperienceContainerManager"),m.retryManager=new u.ExperienceContainerRetryManager(o,n,h,p,c),m.initializeOnAppLaunchAndReinit("constructor"),d.addEventListener("unload",function(){m.cleanupOnAppTeardown("shutdown"),n.flush()}),m}return r(t,e),t.$inject=["orchestrationService","loggingService","experienceContainerFactory","constants","desktopUtilityService","settingsService","experienceContainerFeatureService","experienceContainerCdlCommunicator","appStateService","eventingService","$window","$injector","$q","$rootScope"],t.prototype.mtmaTelemetryIdentifier=function(){return"ExperienceContainerManager"},t.prototype.initializeOnAppLaunchAndReinit=function(e){var t=this.loggingService.findScenario(this.constants.experienceContainers.scenarios.init);this.initInternal(t)},t.prototype.cleanupOnAppTeardown=function(e){this.container&&this.remove(this.container,{reason:e}),this.markTearDownScenario({reason:e},this.retryManager.recreateAttempts),this.container=void 0,this.retryManager.reset(),"shutdown"===e&&(this.onReadyCallback=void 0),this.isCreatingContainer=!1},t.prototype.reload=function(){this.cleanupOnAppTeardown("reloaded");var e=this.loggingService.findScenario(this.constants.experienceContainers.scenarios.init)||this.loggingService.newScenario(this.constants.experienceContainers.scenarios.retryInit);this.initInternal(e)},Object.defineProperty(t.prototype,"isReady",{get:function(){var e=this.getContainerEntry();return!(!e||!e.isReady)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"retryState",{get:function(){return this.retryManager.retryState},enumerable:!0,configurable:!0}),t.prototype.onReady=function(e){this.onReadyCallback=e;var t=this.getContainerEntry();t?t.onReady(this.wrapOnReadyCallback):this.logger.warn("Registration for onReady callback arrived when container entry is undefined")},t.prototype.nudge=function(){if(this.logger.info("Received a nudge to recreate the experience container"),this.isCreatingContainer)this.logger.info("Ignoring nudge request as we are already creating a container.");else{var e=this.getContainerEntry();e||(this.retryManager.reset(),this.shouldRetry({reason:"nudge"})),(e=this.getContainerEntry())||this.logger.error("The nudge attempt failed to recreate the experience container.")}},t.prototype.collectLogs=function(){var e=this.getContainerEntry();return e?e.collectLogs():Promise.resolve([])},t.prototype.collectLeaks=function(){var e=this.getContainerEntry();return e?e.collectLeaks():Promise.resolve({})},t.prototype.shouldShowChatNotification=function(e){var t=this.getContainerEntry();return t?t.shouldShowChatNotification(e):Promise.resolve({shouldShowChatNotification:!0,windowId:void 0})},t.prototype.initInternal=function(e){if(this.isEnabled())try{this.isCreatingContainer=!0;var t=c.getExperienceContainerUrlSetting(this.constants,this.settingsService);this.logger.info("Registering experience container with URL: {0}",t),this.register(this.prepareContainerUrl(t));var n=this.constants.experienceContainers.step.appLaunchRegister;e&&e.mark(n,{reason:t}),this.loggingService.setContext("ecState",n)}catch(t){this.logger.error("Failed to initialize container",t);r=this.constants.experienceContainers.reason.appLaunchFailed;e&&e.fail({reason:r}),this.loggingService.setContext("ecState",r),this.isCreatingContainer=!1}else{var r=this.constants.experienceContainers.reason.notEnabledDuringAppLaunch;e&&e.fail({reason:r}),this.loggingService.setContext("ecState",r)}},t.prototype.isEnabled=function(){return this.experienceContainerFeatureService.isExperienceContainerSupportEnabled()},t.prototype.prepareContainerUrl=function(e){var t=this.desktopUtilityService.isElectron()?"electron":"web",n=new URL(e);n.searchParams.append("agent",t);var r=this.$window.desktopSettings&&this.$window.desktopSettings.experienceRendererBuildContainer;return r?n.searchParams.append("container",r):n.searchParams.append("version",this.getVersion()),n.href},t.prototype.getDefaultContainerSettings=function(e){return{windowId:"northstarCore",hostSettings:this.serviceWrapper.getHostSettings(),perfMarkers:{windowCreateTimeFromMainRenderer:Date.now()},loadUrl:e}},t.prototype.getVersion=function(){return this.settingsService.getOrbitalVersion(this.constants.settings.orbitals.multiWindow)},t.prototype.register=function(e){try{var t={url:e,settings:this.getDefaultContainerSettings(e)};this.container=this.createContainerEntry(t),this.logger.info("Adding EC '"+this.container.experienceContainer.elementId+"'"),this.container.outerWrap&&this.mountElement.appendChild(this.container.outerWrap),this.container.onReady(this.wrapOnReadyCallback)}catch(t){throw this.logger.error("Failed to create container entry",t,e),t}},t.prototype.getContainerEntry=function(){return this.isEnabled()&&this.container},t.prototype.get=function(){var e=this.getContainerEntry();return e&&e.experienceContainer},t.prototype.getUiHandle=function(){var e=this.getContainerEntry();return e&&e.outerWrap},t.prototype.createContainerEntry=function(e){return this.markCreateNewScenario(),new s.ContainerEntry(e,this.experienceContainerFactory,this.loggingService,this.serviceWrapper,this.experienceContainerCdlCommunicator,this.onTearDown,this.constants,this.$window,this.logger,this.settingsService)},t.prototype.remove=function(e,t){this.logger.info("Removing EC '"+e.experienceContainer.elementId+"' with reason='"+t.reason+"'"),e.outerWrap&&this.mountElement.removeChild(e.outerWrap),this.experienceContainerCdlCommunicator&&this.experienceContainerCdlCommunicator.teardown(e.experienceContainer.elementId),this.container=void 0},t.prototype.shouldRetry=function(e){var t=this;this.retryManager.shouldRetry(e).then(function(){return t.onShouldRetry(e)}).catch(function(n){return t.onShouldRetryFailure(n,e)})},t.prototype.markCreateNewScenario=function(){var e=this.constants.experienceContainers.scenarios.createNew;this.loggingService.newScenario(e).stop()},t.prototype.markTearDownScenario=function(e,t){var n=e.data,r=e.reason,o=this.loggingService.findScenario(this.constants.experienceContainers.scenarios.init)||this.loggingService.findScenario(this.constants.experienceContainers.scenarios.retryInit)||this.loggingService.newScenario(this.constants.experienceContainers.scenarios.tearDown);s.isTearDownDueToFailure(e)?o&&o.fail(i({reason:r,errorCode:r,retryAttempt:t},n)):o&&o.stop(i({reason:r,retryAttempt:t},n)),this.loggingService.setContext("ecState",r)},t.prototype.createAndMountElement=function(){var e=o.htmlFactory.createDiv("ExperienceContainerManagerMountElement");return e.setAttribute("class","experience-container-root"),document.body.appendChild(e),e},t}(teamspace.services.MTMABase);t.ExperienceContainerManager=l,angular.module("teamspace.experienceContainerManager",["teamspace.orchestrationService","teamspace.loggingService","teamspace.experienceContainerFactory","teamspace.constants","teamspace.desktopUtilityService","teamspace.settingsService","teamspace.experienceContainerFeatureService","teamspace.experienceContainerCdlCommunicator","teamspace.appState","teamspace.eventingService"]).service("experienceContainerManager",l)},2340:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=teamspace.services,s=n(22),u=n(2341),c=function(){function e(e,t,n,r,i){this.constants=e,this.$injector=t,this.$window=n,this.$q=r,this.$rootScope=i,this.maxPromiseDelayMs=2e4}return e.prototype.initialize=function(){this.eventingService=this.$injector.get("eventingService"),this.authenticationService=this.$injector.get("authenticationService"),this.navigationService=this.$injector.get("navigationService"),this.myUserPreferencesStore=this.$injector.get("myUserPreferencesStore"),this.utilityService=this.$injector.get("utilityService"),this.brbFeedbackService=this.$injector.get("brbV2FeedbackService"),this.channelService=this.$injector.get("channelService"),this.dialogService=this.$injector.get("dialogService"),this.teamActionDialogUtilityService=this.$injector.get("teamActionDialogUtilityService"),this.settingsService=this.$injector.get("settingsService"),this.localizationService=this.$injector.get("localizationService"),this.appStateService=this.$injector.get("appStateService"),this.messageHubService=this.$injector.get("messageHubService"),this.geoRoutingService=this.$injector.get("geoRoutingService"),this.immersiveReaderService=this.$injector.get("immersiveReaderService"),this.loggingService=this.$injector.get("loggingService"),this.sxConfig=this.$injector.get("sxConfig"),this.analyticsService=this.$injector.get("analyticsService"),this.conversationsService=this.$injector.get("conversationsService"),this.meetingNotesService=this.$injector.get("meetingNotesService"),this.callingSupportService=this.$injector.get("callingSupportService"),this.broadcastJoinService=this.$injector.get("broadcastJoinService"),this.screenSharingControlService=this.$injector.get("screenSharingControlService"),this.identityService=this.$injector.get("identityService"),this.logger=this.loggingService.newLogger("MW::ServiceWrapper"),this.workerDataLayerClientHandler=this.$injector.get("workerDataLayerClientHandler"),this.deepLinkService=this.$injector.get("deepLinkService"),this.aggregatedSettingsStore=this.$injector.get("aggregatedSettingsStore"),this.hybridContentRouteListener=this.$injector.get("hybridContentRouteListener"),this.callingMultiWindowService=this.$injector.get("callingMultiWindowService"),this.hybridContentVisibilityManager=this.$injector.get("hybridContentVisibilityManager"),this.desktopUtilityService=this.$injector.get("desktopUtilityService"),this.taskModuleLaunchService=this.$injector.get("taskModuleLaunchService")},e.prototype.emitMessage=function(e,t){this.eventingService.$emit(e,t)},e.prototype.sendScreenSharingControlMessage=function(e){this.screenSharingControlService.postScreenSharingControlMessage(e)},e.prototype.sendBiTelemetry=function(e,t){var n={action:{gesture:void 0,outcome:teamspace.shared.AttributeHelper.tryGetEnumString(teamspace.components.PanelActionOutcome.popOutToNewWindow,teamspace.components.PanelActionOutcome),scenario:teamspace.components.PanelActionScenario.popOutChat,scenarioType:teamspace.components.PanelActionScenarioType.clickButton},panel:{type:e,uri:void 0,uriParams:void 0,viewId:t}};this.analyticsService.sendPanelAction(n)},e.prototype.getAggregatedSettings=function(){var e=this.aggregatedSettingsStore.getSettings(),t=this.$q.resolve(e);return this.utilityService.getPromiseWithTimeout(t,this.maxPromiseDelayMs,void 0,"Get aggregated settings reached maximum timeout.")},e.prototype.getAadToken=function(e,t,n){return this.utilityService.getPromiseWithTimeout(this.authenticationService.getAuthTokens([e],t?[t]:void 0),n||this.maxPromiseDelayMs,void 0,"Webclient Auth request reached maximum timeout - "+(n||this.maxPromiseDelayMs)+".")},e.prototype.getAadTokenObject=function(e){var t=e.resource,n=e.claim,r=e.silent,i=e.forceTokenRenew,o=e.timeout,a=e.correlationId;return this.utilityService.getPromiseWithTimeout(this.authenticationService.getAuthToken(t,n,r,i,a),o||this.maxPromiseDelayMs,void 0,"Webclient Auth request reached maximum timeout - "+(o||this.maxPromiseDelayMs)+".")},e.prototype.getSkypeToken=function(e){var t=this;return this.utilityService.getPromiseWithTimeout(this.authenticationService.getSkypeTokens().then(function(e){return{token:e,regionGtms:t.geoRoutingService.getCurrentRoutingTable()}}),e||this.maxPromiseDelayMs,void 0,"Webclient Auth request reached maximum timeout - "+(e||this.maxPromiseDelayMs)+".")},e.prototype.getAuthUser=function(e){return this.utilityService.getPromiseWithTimeout(this.authenticationService.getUserInformation(),e||this.maxPromiseDelayMs,void 0,"Webclient Auth request reached maximum timeout - "+(e||this.maxPromiseDelayMs)+".")},e.prototype.clearAadCache=function(e){e&&this.authenticationService.clearAdalCache(e)},e.prototype.handleCentralDataLayerRequest=function(e){return this.messageHubService.universalCommunicator.handleRequest(e)},e.prototype.generateUuid=function(){return this.utilityService.generateUUID()},e.prototype.getHostSettings=function(){var e=this.settingsService.getSettings(),t=!e.runningscenariotests&&void 0;return{default:r({},e,{isLPCEnabled:t}),hostSettings:{keyboardLayoutLanguage:this.localizationService.getKeyboardLayout(),localeCode:this.settingsService.getCurrentLocale(),theme:this.settingsService.getActiveTheme(),performanceMode:this.settingsService.getPerformanceMode(),appState:this.appStateService.current,createdTime:Date.now(),enableSyncEngine:this.workerDataLayerClientHandler.enabled,canGetSkypeToken:"mainRenderer",canGetAadToken:"mainRenderer",hostAppWebVersion:this.settingsService.getVersion().clientVersion,desktopAppVersion:this.desktopUtilityService.getDesktopVersion(),cdlSharedWorkerUrl:window.cdlSharedWorkerJsUrl,enableOsDateTimeFormatting:this.settingsService.valueAsBoolean(this.constants.settings.names.enableOsDateTimeFormatting),enableOsDateTimeFormattingTelemetry:this.settingsService.valueAsBoolean(this.constants.settings.names.enableOsDateTimeFormattingTelemetry),isRaiseHandsEnabled:this.callingSupportService.isRaiseHandsEnabledForMultiWindow(),isBufferSharingEnabled:this.settingsService.valueAsBoolean(this.constants.settings.names.callingEnableBufferSharing),isFirstFrameRenderEnabled:this.settingsService.valueAsBoolean(this.constants.settings.names.callingEnableFirstFrameRender),enablePreJoinV2:this.settingsService.valueAsBoolean(this.constants.settings.names.enablePreJoinV2),enableMainWindowPolicyFetch:this.settingsService.valueAsBoolean(this.constants.settings.names.enableMainWindowPolicyFetch),enableCallingIntentEvents:this.settingsService.valueAsBoolean(this.constants.settings.names.enableCallingIntentEvents),enableHybridArchitectureOnDesktop:this.settingsService.valueAsBoolean(this.constants.settings.names.enableHybridArchitectureOnDesktop),enableTeacherPresentInMeetingRestriction:this.settingsService.valueAsBoolean(this.constants.settings.names.enableTeacherPresentInMeetingRestriction),isHybridCallsAppWithContactsEnabled:this.settingsService.valueAsBoolean(this.constants.settings.names.enableHybridCallsAppWithContacts),msgEnableChatHybridArchitectureOnDesktop:this.settingsService.valueAsBoolean(this.constants.settings.names.msgEnableChatHybridArchitectureOnDesktop),isCallingMultiWindowEnabled:this.callingMultiWindowService.isCallingMultiWindowEnabled(),isCallingMWRolloutPhases:this.callingMultiWindowService.isCallingMWInPhasedRollout(),enableRecordingAndTranscribingInMoreScenario:this.settingsService.valueAsBoolean(this.constants.settings.names.enableRecordingAndTranscribingInMoreScenario),userType:this.settingsService.valueFor(this.constants.settings.names.userType)||null},dataLayerSettings:r({},this.messageHubService&&this.messageHubService.getSupportedOperations?this.messageHubService.getSupportedOperations():{}),bootstrapData:this.getBootstrapData()}},e.prototype.triggerAutoBrb=function(e){if(this.settingsService.valueAsBoolean(this.constants.settings.names.enableMWAutoBrb))try{this.brbFeedbackService.sendFeedbackToBrbV2(!0,{category:this.constants.feedback.categories.other,title:"[AutoBRB] "+e,description:"[AutoBRB] "+e,allowScreenshots:!1,includeBackgroundBlurImages:!1,piiSafeLogsOnly:!1})}catch(e){this.logger.warn("triggerAutoBrb failed with "+e)}},e.prototype.dispatchEventToMainWindow=function(e){switch(e){case"click":case"mousemove":var t=new MouseEvent(e),n=this.$window.document.activeElement;Object.defineProperty(t,"target",{value:n,enumerable:!0}),this.$window.document.dispatchEvent(t)}},e.prototype.navigateMainWindowWithEntityCommand=function(e,t){return i(this,void 0,void 0,function(){var n,r,i,a,s,c,l,f,h,p,d,g,v,y,m,w,b,C,S,E,x,R,A,I,k,T,O,W,M=this;return o(this,function(o){switch(o.label){case 0:if(n="experience-container-entity-command",r=e.entity,i=r.type,a=r.action,s=r.id,c=r.linkedEntity,l=e.entityOptions,f="navigateMainWindowWithEntityCommand: ",this.externalDialogHandler||(this.externalDialogHandler=new u.ExternalDialogHandler(this.dialogService,this.logger,this.$q,t)),"extensions"!==i||"view"!==a||"organization"!==s)return[3,2];h=c.id,p=void 0;try{p=JSON.parse(h||"[]")[0]}catch(e){return this.logger.error(f+"Failed to parse org chart mri: "+h),[2]}return[4,this.navigationService.navigateToPerson(p,this.constants.peopleTab.panes.organization,!1)];case 1:return O=o.sent(),this.logger.info(f+"Org Chart mri: "+p+", navigationResult: "+O),[3,14];case 2:return"channels"===i&&"view"===a&&s?l?(d=l,g=d.dateTimeSent,C=d.messageId,v=d.parentMessageId,y=void 0===v?C:v,m=s,w="Team",b="Channel",this.navigationService.navigateToMessage(this.$rootScope,g,m,C,y,C,n,w,b,null,this.constants.appId.search,null),[3,14]):[2]:[3,3];case 3:return"chats"!==i||"view"!==a?[3,5]:(C=l&&l.messageId,[4,C?this.navigationService.navigateToMessage(this.$rootScope,(new Date).toString(),s,C,C,C,n,null,null,null,this.constants.appId.search):this.navigationService.navigateToChat(s,n)]);case 4:return O=o.sent(),this.logger.info(f+"View Chat: "+s+", navigationResult: "+O),[3,14];case 5:return"brbfeedbackdialog"!==i||"view"!==a?[3,7]:[4,this.brbFeedbackService.openDialog(void 0,void 0,void 0,void 0,void 0,!0)];case 6:return o.sent(),this.logger.info(f+"BRB Feedback"),[3,14];case 7:return"teampicture"!==i||"view"!==a?[3,8]:(this.getTeam(s).then(function(e){M.externalDialogHandler.open(M.constants.dialogs.changeTeamPicture,{team:e})}),this.logger.info(f+"Edit team picture: "+s),[3,14]);case 8:return"teamjoincode"!==i||"view"!==a?[3,9]:(this.getTeam(s).then(function(t){var n=e.entityOptions;M.externalDialogHandler.open(M.constants.dialogs.presentTeamJoinCode,{team:t,teamJoinCode:n.teamJoinCode})}),this.logger.info(f+"Show team join code : "+s),[3,14]);case 9:return"teamrenewal"!==i||"view"!==a?[3,10]:(this.getTeam(s).then(function(t){var n=e.entityOptions,r=M.teamActionDialogUtilityService.getRenewTeamDialogData(n.expiryTime,t,[]);M.externalDialogHandler.open(M.constants.dialogs.confirmDialog,r)}),this.logger.info(f+"Show Team renewal confirmation: "+s),[3,14]);case 10:return"platformapp"!==i||"create"!==a?[3,11]:(S=e.entityOptions,this.externalDialogHandler.open(this.constants.lazyDialogs.addAppNew,{entryPoint:S.entryPoint,appId:S.appId},this.constants.lazyModules.extensibilityDialogs),this.logger.info("App installation flow invoked via commanding for appId: "+S.appId),[3,14]);case 11:return"file"!==i||"view"!==a?[3,13]:(E=e.entityOptions,x=E.fileId,R=E.fileType,A=E.objectUrl,I=E.serviceName,k={baseUrl:"",fileId:x,fileType:R,objectUrl:A,serviceName:I,viewerAction:this.constants.files.fileActions.viewer.view},T={documentViewerParams:_.pickBy(k,_.identity),viewerState:this.constants.states.appDocumentViewer},[4,this.navigationService.navigateToFileViewer(T)]);case 12:return O=o.sent(),this.logger.info(f+"View file: "+x+", navigationResult: "+O),[3,14];case 13:if("taskmodule"!==i)return this.logger.warn(f+" Called with an entityCommand, but did not match any results entity "+e.entity),[2];this.logger.info(f+"launching angular task module"),this.taskModuleLaunchService.launchTaskModuleByEntityCommand(e,this.externalDialogHandler),o.label=14;case 14:return(W=this.$window.electronSafeIpc)?W.send("windowFocus"):this.$window.focus(),[2]}})})},e.prototype.navigateHybridContentRoute=function(e){return i(this,void 0,void 0,function(){var t,n,i,s,u,c,l,f,h,p,d,g,v;return o(this,function(o){switch(o.label){case 0:if(t="navigateHybridContentRoute: ",n="experience-container-entity-command",i=e.entity,s=i.type,u=i.action,c=i.id,l=e.command,f=l.correlation,h=l.visibilityState,"galleryImages"===s)return"show"===h?this.hybridContentVisibilityManager.showElement(a.LayoutChangeType.FullscreenStart):"hide"===h&&this.hybridContentVisibilityManager.showElement(a.LayoutChangeType.FullscreenStop),[2,Promise.resolve()];if(void 0===(p=this.hybridContentRouteListener.getRouteForSentCommand(f.id)))return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.navigationService.navigatePromise(this.$rootScope,p.toState.name,r({},p.toParams,{commandCorrelationId:f.id}),!0)];case 2:return v=o.sent(),this.logger.info(t+" Navigating to route sent by hybridcontentroutelistener, navigationResult: "+v),[3,4];case 3:return d=o.sent(),(g=this.loggingService.findScenarioByNameAndId(this.constants.experienceContainers.scenarios.hybridRoute,f.id))&&g.fail({reason:"NavigationFailed"}),[3,4];case 4:return[3,7];case 5:return"chats"===s&&"view"===u&&c?[4,this.navigationService.navigateToChat(c,n)]:[3,7];case 6:v=o.sent(),this.logger.info(t+" Internal command Chat: "+c+", navigationResult: "+v),o.label=7;case 7:return[2,this.hybridContentVisibilityManager.showElement()]}})})},e.prototype.onHybridContentReadyToRender=function(e){"galleryImages"===e.entity.type&&this.hybridContentVisibilityManager.onHybridContentReadyToRender()},e.prototype.navigateMainWindow=function(e,t){var n=this,r=!0;switch(e){case a.OpenHandler.ImmersiveReader:this.immersiveReaderService.launchImmersiveReaderRemote(t.conversationId,t.messageId,t.setFocusOnClose).catch(function(e){n.logger.error("Unable to launch immersive reader from remote, reason: "+e)});break;case a.OpenHandler.MeetingNotes:var i,o=t.conversationId,s=t.messageId,u=t.pageId,c=t.sectionId,l=t.scenarioId,f=this.conversationsService.getConversation(o).isMeetingConversation(),h=l&&this.loggingService.findScenario(l);i=null==u||null==c?this.meetingNotesService.getMeetingNotesLink(f,o,s):Promise.resolve({pageId:u,sectionId:c}),this.meetingNotesService.findMeetingNotesTab(o).then(function(e){return i.then(function(t){var r=t.pageId,i=t.sectionId;return n.navigationService.navigateToMeetingNotes(n.constants.navContext.multiWindow,o,f,r,i,e&&e.id)})}).then(function(){return h&&h.stop()}).catch(function(){return h&&h.fail({reason:"Navigation to "+(f?"private":"channel")+" notes ("+u+", "+c+") failed"})});break;case a.OpenHandler.DeepLink:this.deepLinkService.executeDeepLink(t.url);break;case a.OpenHandler.JoinBroadcastAsAttendee:var p={tenantId:t.tenantId,organizerId:t.organizerId,threadId:t.threadId,messageId:s=t.messageId,userRoleOverride:teamspace.services.BroadcastParticipantRole.Attendee};this.broadcastJoinService.joinBroadcastPlayback(p);break;case a.OpenHandler.Transcript:var d=t.transcriptId,g=t.meetingOrganizerId,v=t.meetingTenantId,y=t.iCalUid,m=t.conversationId;this.navigationService.navigateToCalendarTranscriptTab(d,g,v,y,m);break;default:r=!1}if(r){var w=this.$window.electronSafeIpc;w?w.send("windowFocus"):this.$window.focus()}return r},e.prototype.sendHybridViewportRenderingEvents=function(e,t,n){e===s.CommandEvent.RenderStarted&&this.eventingService.$emit(this.constants.events.orchestration.resumeDeferredStages),t&&t.entity&&t.entity.type&&"chats"===t.entity.type&&(e===s.CommandEvent.RenderStarted&&this.eventingService.$emit(this.constants.events.messages.messageListRenderStateChanged,{state:teamspace.components.MessageListRenderState.Rendered}),(e===s.CommandEvent.Rendered||!1===n&&e===s.CommandEvent.RenderStarted)&&this.eventingService.$emit(this.constants.events.messages.messageListRenderStateChanged,{state:teamspace.components.MessageListRenderState.RenderedFully}))},e.prototype.getTeam=function(e){var t=this;return this.channelService.resolveTeamAndChannel(e).then(function(n){return n.team.objectId===e?t.$q.resolve(n.team):(t.logger.error("Failed to fetch team "+e),t.$q.reject())})},e.prototype.getBootstrapData=function(){var e=this.geoRoutingService.getCurrentRoutingTable(),t=e&&e.regionName,n=this.sxConfig.getCurrentSkypeMri(),r=this.myUserPreferencesStore.getUserPreferences(),i={isFreemium:this.identityService.isFreemiumTenant()};return this.logger.info("getBootstrapData() returning currentUserMri="+n),{readReceiptUserPreference:r.readReceiptsEnabled,theme:this.settingsService.getActiveTheme(),userId:n,region:t,regionGtms:e,licenseDetails:i}},e}();t.AngularServiceWrapper=c},2341:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=function(){function e(e,t,n,r){this.dialogService=e,this.logger=t,this.$q=n,this.postMessageHandler=r}return e.prototype.open=function(e,t,n){var o=this;void 0===t&&(t={}),this.openResultPromise&&this.openResultPromise.then(function(t){o.logger.warn("Closing dialog id "+t.id+" due to new dialog open request for "+e+"."),t.close()});var a=function(){o.postMessageHandler({eventId:i.ChildWindowEventRequest.ExtendedEntityContainerState,payload:{containerState:teamspace.services.ExtendedContainerState.Confirmed}})},s=function(e){return o.postMessageHandler({eventId:i.ChildWindowEventRequest.ExtendedEntityContainerState,payload:{containerState:e}})};return this.openResultPromise=n?this.dialogService.openLazyDialog(e,n,r({},t,{postConfirmCallback:a})):this.$q.resolve(this.dialogService.open(e,r({},t,{postConfirmCallback:a}))),this.openResultPromise.then(function(e){s(teamspace.services.ExtendedContainerState.Open),e.closePromise.then(function(){s(teamspace.services.ExtendedContainerState.Closed)})}),this.openResultPromise},e}();t.ExternalDialogHandler=o},2342:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(22),i=n(2343),o=n(59);t.isTearDownDueToFailure=function(e){var t=e.reason;return["crashed","failed-to-load","failed-to-load-chunk","failed-to-navigate","core-init-failed","no-skype-id"].some(function(e){return e===t})};var a=function(){function e(e,t,n,a,s,u,c,l,f,h){var p=this;this.params=e,this.experienceContainerFactory=t,this.loggingService=n,this.serviceWrapper=a,this.cdlCommunicator=s,this.onTearDownCallback=u,this.constants=c,this.$window=l,this.logger=f,this.settingsService=h,this.onTearDown=function(e,t){p._isReady=!1,p.tearDownListeners(),p.shellCommWrapper.tearDown(),p.stopCoreInitializedTimer(),p.onTearDownCallback(p,{data:t,reason:e})},this.onCrashed=function(){return p.onTearDown("crashed")},this.onFailedToLoad=function(e){return p.onTearDown("failed-to-load",e&&{errorDescription:e.errorDescription,statusCode:e.errorCode})},this.onFailedToLoadChunk=function(e){return p.onTearDown("failed-to-load-chunk",e&&{errorDescription:e.payload&&e.payload.errorDescription})},this.onFailedToNavigate=function(e){return p.onTearDown("failed-to-navigate",e&&{statusCode:e.httpResponseCode})},this.onReloaded=function(){return p.onTearDown("reloaded")},this.onCdlRequest=function(e){p.cdlCommunicator?e?(p.experienceContainer&&(e.dataLayer.rendererId=p.experienceContainer.elementId),p.cdlCommunicator.sendDataLayerRequest(e,p.experienceContainer.postMessage)):p.logger.error("Error in processing data layer request: Data layer request is undefined."):p.logger.error("Error in processing data layer request: Cdl communicator is unavailable.")},this.startCoreInitializedTimer=function(e){if(!e)return function(){};var t=p.constants.experienceContainers.timers.coreInitializedTimeout,n=p.$window.setTimeout(function(){p.onTearDown("core-not-initialized")},t);return function(){p.$window.clearTimeout(n)}},this.onCoreInitialized=function(){p.logger.info("Experience Container Core Initialized");var e=p.logger.service.findScenario(p.constants.experienceContainers.scenarios.init)||p.logger.service.findScenario(p.constants.experienceContainers.scenarios.retryInit),t=r.ChildWindowEventRequest.CoreInitialized;e?e.stop({reason:t}):p.logger.service.newScenario(p.constants.experienceContainers.scenarios.coreInitializedMiss).stop(),p.loggingService.setContext("ecState",t),p.stopCoreInitializedTimer(),p._isReady=!0,p.onReadyCallback?p.onReadyCallback():p.logger.error("onReady callback is not registered to the container entry")},this.onCoreInitializationFailed=function(e){p.onTearDown("core-init-failed",e&&{errorDescription:e&&e.errorDescription})},this._isReady=!1;var d=t.create(e);if(this.experienceContainer=d,!this.hasInvalidUserId(e)){this.setupListeners(),this.outerWrap=o.htmlFactory.createDiv("ExperienceContainerWrap-"+d.elementId),this.shellCommWrapper=new i.ShellCommWrapper(d,n,a,h,c),this.outerWrap.setAttribute("class","hidden");var g=n.findScenario(c.experienceContainers.scenarios.init);this.stopCoreInitializedTimer=this.startCoreInitializedTimer(g),d.appendTo(this.outerWrap).then(function(){var e=c.experienceContainers.step.constructContainerEntry;g&&g.mark(e),n.setContext("ecState",e)}).catch(function(e){f.error("Failed to append experience container "+d.elementId+" to wrapper: "+e);var t=e&&e.reason||c.experienceContainers.reason.constructContainerEntryFailed;g&&g.fail({reason:t,errorCode:e&&e.errorCode}),n.setContext("ecState",t)})}}return Object.defineProperty(e.prototype,"isReady",{get:function(){return this._isReady},enumerable:!0,configurable:!0}),e.prototype.onReady=function(e){this.onReadyCallback=e},e.prototype.collectLogs=function(){var e=this;return new Promise(function(t,n){var i=e.constants.timeInMiliseconds.second,o=r.ChildWindowEventRequest.GetLogs,a={eventId:o},s=0,u=function(n){e.experienceContainer.removeEventListener(o,u),e.$window.clearTimeout(s),t(n&&n.logs||[])};s=e.$window.setTimeout(function(){var t="Request to gather logs from experience container timed out after "+i+" milli seconds.";e.logger.error(t),e.experienceContainer.removeEventListener(o,u),n(t)},i),e.experienceContainer.addEventListener(o,u),e.experienceContainer.postMessage(a)})},e.prototype.collectLeaks=function(){var e=this;return new Promise(function(t,n){var i=15*e.constants.timeInMiliseconds.second,o=r.ChildWindowEventRequest.GetLeaks,a=0,s=function(n){e.experienceContainer.removeEventListener(o,s),e.$window.clearTimeout(a),t(n&&n.leaks||{})};a=e.$window.setTimeout(function(){var t="Request to gather leaks from experience container timed out after "+i+" milliseconds.";e.logger.error(t),e.experienceContainer.removeEventListener(o,s),n(t)},i),e.experienceContainer.addEventListener(o,s),e.experienceContainer.postMessage({eventId:o})})},e.prototype.shouldShowChatNotification=function(e){var t=this;return new Promise(function(n,i){var o=t.logger.service.newScenario(t.constants.containerEntry.scenarios.shouldShowChatNotification);try{var a=t.constants.timeInMiliseconds.second,s=r.ChildWindowEventRequest.ShouldShowChatNotification,u={eventId:s,payload:{convId:e}},c=0,l=function(e){if(t.experienceContainer.removeEventListener(s,l),t.$window.clearTimeout(c),e&&e.hasOwnProperty("shouldShowChatNotification"))return o.stop(),n(e);t.logger.error("Response for shouldShowChatNotification is malformed "+JSON.stringify(e)),o.fail({reason:"invalidResponse"}),n({shouldShowChatNotification:!0,windowId:void 0})};c=t.$window.setTimeout(function(){var e="Request for shouldShowChatNotification timed out after "+a+" milli seconds.";t.logger.error(e),t.experienceContainer.removeEventListener(s,l),o.cancel(),n({shouldShowChatNotification:!0,windowId:void 0})},a),t.experienceContainer.addEventListener(s,l),t.experienceContainer.postMessage(u)}catch(e){var f=t.getErrorString(e);o.fail({reason:"exception",errorMessage:f,errorCode:e&&e.errorCode,errorReason:e&&e.reason}),n({shouldShowChatNotification:!0,windowId:void 0})}})},e.prototype.hasInvalidUserId=function(e){var t=this,n=!(e&&e.settings&&e.settings.hostSettings&&e.settings.hostSettings.bootstrapData&&e.settings.hostSettings.bootstrapData.userId&&"8:undefined"!==e.settings.hostSettings.bootstrapData.userId);return n&&setTimeout(function(){return t.onTearDownCallback(t,{reason:"no-skype-id"})},0),n},e.prototype.getErrorString=function(e){var t=this.settingsService.getRing();return t&&"ring0"===t.id?JSON.stringify(e):void 0},e.prototype.setupListeners=function(){this.experienceContainer.addEventListener("crashed",this.onCrashed),this.experienceContainer.addEventListener("failed-to-load",this.onFailedToLoad),this.experienceContainer.addEventListener("failed-to-load-chunk",this.onFailedToLoadChunk),this.experienceContainer.addEventListener("failed-to-navigate",this.onFailedToNavigate),this.experienceContainer.addEventListener(r.ChildWindowEventRequest.WindowUnloaded,this.onReloaded),this.experienceContainer.addEventListener(r.ChildWindowEventRequest.CentralDataLayerRequest,this.onCdlRequest),this.experienceContainer.addEventListener(r.ChildWindowEventRequest.CoreInitialized,this.onCoreInitialized),this.experienceContainer.addEventListener(r.ChildWindowEventRequest.CoreInitializationFailed,this.onCoreInitializationFailed)},e.prototype.tearDownListeners=function(){this.experienceContainer.removeEventListener("crashed",this.onCrashed),this.experienceContainer.removeEventListener("failed-to-load",this.onFailedToLoad),this.experienceContainer.removeEventListener("failed-to-load-chunk",this.onFailedToLoadChunk),this.experienceContainer.removeEventListener("failed-to-navigate",this.onFailedToNavigate),this.experienceContainer.removeEventListener(r.ChildWindowEventRequest.WindowUnloaded,this.onReloaded),this.experienceContainer.removeEventListener(r.ChildWindowEventRequest.CentralDataLayerRequest,this.onCdlRequest),this.experienceContainer.removeEventListener(r.ChildWindowEventRequest.CoreInitialized,this.onCoreInitialized),this.experienceContainer.removeEventListener(r.ChildWindowEventRequest.CoreInitializationFailed,this.onCoreInitializationFailed)},e}();t.ContainerEntry=a},2343:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=teamspace.services.ApplicationState,a=teamspace.services.UtilityServiceStatics.safeJsonStringify,s=function(){function e(e,t,n,r,o){var a=this;this.experienceContainer=e,this.serviceWrapper=n,this.settingsService=r,this.constants=o,this.messageHandler=function(e){var t=function(e){return a.experienceContainer.postMessage(e)};switch(e.eventId){case i.ChildWindowEventRequest.AadGetToken:a.settingsService.valueAsBoolean(a.constants.settings.names.returnTokenWithExpiration)?a.handleAadGetTokenObject(e,t):a.handleAadGetToken(e,t);break;case i.ChildWindowEventRequest.AadGetCurrentUser:a.handleAadGetCurrentUser(e,t);break;case i.ChildWindowEventRequest.GetStateData:a.handleGetStateData(e,t);break;case i.ChildWindowEventRequest.RequestShellToOpen:a.handleRequestShellToOpen(e,t);break;case i.ChildWindowEventRequest.UpdateWindowState:a.handleUpdateWindowState(e);break;case i.ChildWindowEventRequest.ScreenSharingControlMessage:a.handleScreenSharingControlMessage(e);break;case i.ChildWindowEventRequest.GetAggregatedSettings:a.handleGetAggregatedSettings(e,t);break;case i.ChildWindowEventRequest.CommandEvent:a.handleCommandEvent(e,t);break;case i.ChildWindowEventRequest.TriggerAutoBrb:a.handleAutoBrb(e);break;case i.ChildWindowEventRequest.WindowCrashed:case"windowErrored":a.handleWindowErrored(e);break;case i.ChildWindowEventRequest.UnhandledShortcut:a.handleUnhandledShortcut(e);break;case i.ChildWindowEventRequest.UnhandledMouseEvent:a.handleUnhandledMouseEvent(e)}},e.addEventListener("message",this.messageHandler),this.logger=t.newLogger(o.experienceContainers.log.prefix+"ShellCommWrapper")}return e.prototype.tearDown=function(){this.experienceContainer.removeEventListener("message",this.messageHandler)},e.prototype.createScenarioForAuth=function(e){var t=this.logger.service.findScenario(this.constants.experienceContainers.scenarios.ipcMessageListener);!t&&this.settingsService.valueFor(this.constants.settings.names.enableIPCMessageScenarioLogInShellCommV2)&&(t=this.logger.service.newScenario(this.constants.experienceContainers.scenarios.ipcMessageListener)),this.logger.info("message recieved eventId: '["+e.eventId+"], correaltionId: ["+e.correlationId+"]', payload:["+e.payload+"]"),t&&t.appendEventData({correlationId:e.correlationId,payload:a(e.payload),eventId:e.eventId})},e.prototype.handleAutoBrb=function(e){var t=e.payload;t&&t.title?this.serviceWrapper.triggerAutoBrb(t.title):this.logger.warn("handleAutoBrb called without valid payload "+a(t))},e.prototype.handleCommandEvent=function(e,t){var n=e.payload;if(n&&n.entityCommand&&n.commandEvent){var r=n.entityCommand,o=n.commandEvent,a=n.isCommandTargetedToMainWindow;if(r.entity&&r.command)return this.logger.info("CommandEvent, Payload: "+JSON.stringify(n)),o===i.CommandEvent.NotHandled?this.serviceWrapper.navigateMainWindowWithEntityCommand(r,t):a?this.handleCommandTargetedToMainWindow(n):void 0;this.logger.warn("handleCommandEvent Called without a valid payload command, payload: "+JSON.stringify(n))}else this.logger.warn("handleCommandEvent Called without a valid payload: "+JSON.stringify(n))},e.prototype.handleCommandTargetedToMainWindow=function(e){var t=e.entityCommand,n=e.commandEvent,r=e.contentExistsAndHasChanged;n===i.CommandEvent.WindowUpdated?this.serviceWrapper.navigateHybridContentRoute(t):n!==i.CommandEvent.UnmountStarted&&n!==i.CommandEvent.Rendered||this.serviceWrapper.onHybridContentReadyToRender(t),this.serviceWrapper.sendHybridViewportRenderingEvents(n,t,!!r)},e.prototype.handleGetAggregatedSettings=function(e,t){var n=this;this.serviceWrapper.getAggregatedSettings().then(function(t){return n.buildResponse(e,{data:t})}).then(t).catch(function(e){return n.logger.error("Failed to handle getAggregatedSettings",e)})},e.prototype.handleAadGetToken=function(e,t){var n=this;this.createScenarioForAuth(e),this.serviceWrapper.getAadToken(e.payload.resource,e.payload.claim?e.payload.claim:void 0,e.payload&&e.payload.timeout).then(function(t){return n.buildResponse(e,{token:t})}).then(t).catch(function(r){n.logger.error("Failed to handle AAD token",r),t(n.buildErrorResponse(e,r))})},e.prototype.handleAadGetTokenObject=function(e,t){var n=this;this.createScenarioForAuth(e);var r=e.payload,i=r.resource,o=r.claim,a=r.timeout,s=r.silent,u=r.forceTokenRenew,c=r.correlationId;this.serviceWrapper.getAadTokenObject({resource:i,claim:o,timeout:a,silent:s,forceTokenRenew:u,correlationId:c}).then(function(t){if(!t||!t.token)throw new Error("Received invalid token. value='"+(t?JSON.stringify(t):t)+"'");return n.buildResponse(e,t)}).then(t).catch(function(r){n.logger.error("Failed to handle AAD token",r),t(n.buildErrorResponse(e,r))})},e.prototype.handleAadGetCurrentUser=function(e,t){var n=this;this.createScenarioForAuth(e),this.serviceWrapper.getAuthUser(e.payload&&e.payload.timeout).then(function(t){return n.buildResponse(e,{authUser:t})}).then(t).catch(function(r){n.logger.error("Failed to handle AadGetCurrentUser",r),t(n.buildErrorResponse(e,r))})},e.prototype.handleGetStateData=function(e,t){var n=this;this.createScenarioForAuth(e);var r;switch(e.payload.requestType){case"skypeToken":r=this.serviceWrapper.getSkypeToken(e.payload&&e.payload.timeout).then(function(e){return{skypeTokenData:e}});break;case"hostSettings":r=Promise.resolve({hostSettings:this.serviceWrapper.getHostSettings()})}r.then(function(t){return n.buildResponse(e,t)}).then(t).catch(function(r){n.logger.error("Failed to handle GetStateData",r),t(n.buildErrorResponse(e,r))})},e.prototype.handleRequestShellToOpen=function(e,t){var n=this;if(e){var r=void 0,i=e.payload.openType,o=e.payload.openHandler,a=e.payload.handlerParams;if(i&&o)switch(i){case teamspace.services.OpenType.OpenOnMainRenderer:r=Promise.resolve({opened:this.serviceWrapper.navigateMainWindow(o,a)})}r.then(function(t){return n.buildResponse(e,t)}).then(t).catch(function(e){return n.logger.error("Failed to handle RequestShellToOpen",e)})}},e.prototype.handleScreenSharingControlMessage=function(e){e&&e.payload&&this.serviceWrapper.sendScreenSharingControlMessage(e.payload)},e.prototype.handleUpdateWindowState=function(e){if(e&&e.payload&&e.payload.childSettings&&e.payload.childSettings.appState){var t=e.payload.childSettings.appState;t!==o.Interactive&&t!==o.InCall||this.serviceWrapper.emitMessage("IdleEnd")}},e.prototype.handleUnhandledShortcut=function(e){var t=new KeyboardEvent(e.payload.type,e.payload);document.dispatchEvent(t),window.focus()},e.prototype.handleWindowErrored=function(e){var t=this,n=e.payload||{},r=n.errorMsg;if(n.showOops){var i=n.logs&&Array.isArray(n.logs)&&n.logs.length>0,o=i?"\nLogs emitted for a child window error:\n":"";this.logger.warn("Child window has hit an unrecovered errored state: errorMsg="+r+", errorCode="+n.errorCode+"."+o),n.errorStack&&this.logger.warn("Error Stack: "+n.errorStack),i&&n.logs.forEach(function(e){t.logger.warn(e.timeStamp+" "+e.levelName+" - "+e.message)})}},e.prototype.handleUnhandledMouseEvent=function(e){e.payload&&e.payload.type&&this.serviceWrapper.dispatchEventToMainWindow(e.payload.type)},e.prototype.buildResponse=function(e,t){var n=this.logger.service.findScenario(this.constants.experienceContainers.scenarios.ipcMessageListener);return n&&n.stop({"EventInfo.CorrelationId":e.correlationId}),this.logger.info("buildResponse for eventId:'["+e.eventId+"]', correlationId:'["+e.correlationId+"]'"),r({},e,{payload:t||{}})},e.prototype.buildErrorResponse=function(e,t){var n=this.logger.service.findScenario(this.constants.experienceContainers.scenarios.ipcMessageListener),i=this.getError(t),o="string"==typeof i?i:i.message?i.message:a(i),s=e.correlationId,u=e.eventId;return n&&n.fail({"EventInfo.CorrelationId":s,EcMessageListenerErrorMessage:o,eventId:u}),this.logger.info("buildErrorResponse for eventId:'["+u+"]', correlationId:'["+s+"]'"),r({},e,{error:i})},e.prototype.getError=function(e){return e?"string"==typeof e?e:e.error?e.error:e.message?e.message:"No message from error object":"Error not present"},e}();t.ShellCommWrapper=s},2344:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(22),s=n(2345),u=n(2346);!function(e){e.IGNORED="retry_ignored",e.CANCELED="retry_canceled",e.FAILED="retry_failed"}(o=t.RETRY_FAILURES||(t.RETRY_FAILURES={}));var c=function(){function e(e,t,n,r,i){var o=this;this.constants=e,this.loggingService=t,this.appStateService=n,this.eventingService=r,this.retries=0,this.lastRetriedTimestamp=0,this.isRetrying=!1,this._retryState=a.RetryState.NotRetried,this.retryStrategy=null,this.logger=null,this.resetInternal=function(){o.logger.info("Resetting the retry manager counters on tear down."),o.lastRetriedTimestamp=0,o.resetRetries(),o._retryState=a.RetryState.NotRetried},this.resetRetries=function(){o.logger.info("Resetting the retry count to 0."),o.retries=0},this.logger=t.newLogger(e.experienceContainers.log.prefix+"ExperienceContainerRetryManager");var c=i.valueFor(e.settings.names.experienceContainerRetryConfig);if(i.valueAsBoolean(e.settings.names.enableMultiWindowContainerRetry)){this.logger.info('Using "getLinearNetworkErrorRetry" strategy');var l=c&&c.strategies&&c.strategies.linearNetworkErrorRetry;this.retryStrategy=u.getLinearNetworkErrorRetry(l)}var f=c&&c.strategies&&c.strategies.defaultRetryStrategy;this.retryStrategy=this.retryStrategy||u.getDefaultRetryStrategy(f),this.resetRetriesOnce=s.once(this.resetRetries)}return e.prototype.shouldRetry=function(e){return r(this,void 0,void 0,function(){var t,n,r,s,u,c,l,f;return i(this,function(i){switch(i.label){case 0:if(t=Date.now()-this.lastRetriedTimestamp,n=this.loggingService.newScenario(this.constants.experienceContainers.scenarios.retry),this.logger.info("New retry request. Reason: "+e.reason),this.isRetrying&&"nudge"===e.reason)return n.stop({reason:e.reason}),this.logger.info("Retrying due to a nudge request."),this.updateRetryCounters(),this.resetRetries(),this._retryState=a.RetryState.RetryTriggered,[2];if(this.isRetrying)throw n.stop({reason:o.IGNORED}),this.logger.info("Retry was ignored"),o.IGNORED;this.isRetrying=!0,r=0,s=this.retryStrategy.conditions,i.label=1;case 1:return r<s.length?(u=s[r],this._retryState="shouldRetryOnNetworkError"===u.name?a.RetryState.WaitingForNetwork:a.RetryState.WaitingForCondition,[4,u({event:e,timeElapsed:t,resetRetriesOnce:this.resetRetriesOnce,appStateService:this.appStateService,logger:this.logger,eventingService:this.eventingService,constants:this.constants,timeoutBetweenRetries:this.retryStrategy.timeoutBetweenRetries,recreateTimeout:this.retryStrategy.recreateTimeout,scenario:n,maxRecreateAttempts:this.retryStrategy.maxRecreateAttempts,retries:this.retries})]):[3,4];case 2:if(c=i.sent(),l=c.shouldRetry,f=c.resetRetryCountAfterRetry,l&&!this.isRetrying)throw n.stop({reason:o.CANCELED}),this.logger.info("Retry was canceled"),o.CANCELED;if(l&&this.isRetrying)return n.stop({reason:u.name}),this.logger.info("Retry succeeded. Retry condition: "+u.name),this.updateRetryCounters(),f&&this.resetRetries(),this._retryState=a.RetryState.RetryTriggered,[2];i.label=3;case 3:return r++,[3,1];case 4:throw n.fail({reason:o.FAILED}),this.isRetrying=!1,this.logger.error("Maximum retries hit. Not attempting to recreate the experience container."),this._retryState=a.RetryState.RetryFailed,o.FAILED}})})},e.prototype.reset=function(){this.resetInternal(),this.resetRetriesOnce=s.once(this.resetRetries)},Object.defineProperty(e.prototype,"recreateAttempts",{get:function(){return this.retries},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"retryState",{get:function(){return this._retryState},enumerable:!0,configurable:!0}),e.prototype.updateRetryCounters=function(){this.lastRetriedTimestamp=Date.now(),this.retries++,this.isRetrying=!1},e}();t.ExperienceContainerRetryManager=c},2345:function(e,t,n){(function(e,r){var i;(function(){function o(e,t){return e.set(t[0],t[1]),e}function a(e,t){return e.add(t),e}function s(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function u(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function c(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function l(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function f(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function h(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function p(e,t){return!!(null==e?0:e.length)&&E(e,t,0)>-1}function d(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function g(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function v(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function y(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function m(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function w(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function _(e){return e.split("")}function b(e){return e.match(Ut)||[]}function C(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function S(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function E(e,t,n){return t===t?Y(e,t,n):S(e,R,n)}function x(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function R(e){return e!==e}function A(e,t){var n=null==e?0:e.length;return n?W(e,t)/n:Le}function I(e){return function(t){return null==t?ie:t[e]}}function k(e){return function(t){return null==e?ie:e[t]}}function T(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function O(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function W(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==ie&&(n=n===ie?o:n+o)}return n}function M(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function j(e,t){return g(t,function(t){return[t,e[t]]})}function L(e){return function(t){return e(t)}}function D(e,t){return g(t,function(t){return e[t]})}function P(e,t){return e.has(t)}function F(e,t){for(var n=-1,r=e.length;++n<r&&E(t,e[n],0)>-1;);return n}function z(e,t){for(var n=e.length;n--&&E(t,e[n],0)>-1;);return n}function U(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}function $(e){return"\\"+An[e]}function N(e,t){return null==e?ie:e[t]}function B(e){return mn.test(e)}function q(e){return wn.test(e)}function H(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function V(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function G(e,t){return function(n){return e(t(n))}}function J(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==le||(e[n]=le,o[i++]=n)}return o}function Z(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function K(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Y(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function Q(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}function X(e){return B(e)?te(e):qn(e)}function ee(e){return B(e)?ne(e):_(e)}function te(e){for(var t=vn.lastIndex=0;vn.test(e);)++t;return t}function ne(e){return e.match(vn)||[]}function re(e){return e.match(yn)||[]}var ie,oe=200,ae="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",se="Expected a function",ue="__lodash_hash_undefined__",ce=500,le="__lodash_placeholder__",fe=1,he=2,pe=4,de=1,ge=2,ve=1,ye=2,me=4,we=8,_e=16,be=32,Ce=64,Se=128,Ee=256,xe=512,Re=30,Ae="...",Ie=800,ke=16,Te=1,Oe=2,We=1/0,Me=9007199254740991,je=1.7976931348623157e308,Le=NaN,De=4294967295,Pe=De-1,Fe=De>>>1,ze=[["ary",Se],["bind",ve],["bindKey",ye],["curry",we],["curryRight",_e],["flip",xe],["partial",be],["partialRight",Ce],["rearg",Ee]],Ue="[object Arguments]",$e="[object Array]",Ne="[object AsyncFunction]",Be="[object Boolean]",qe="[object Date]",He="[object DOMException]",Ve="[object Error]",Ge="[object Function]",Je="[object GeneratorFunction]",Ze="[object Map]",Ke="[object Number]",Ye="[object Null]",Qe="[object Object]",Xe="[object Proxy]",et="[object RegExp]",tt="[object Set]",nt="[object String]",rt="[object Symbol]",it="[object Undefined]",ot="[object WeakMap]",at="[object WeakSet]",st="[object ArrayBuffer]",ut="[object DataView]",ct="[object Float32Array]",lt="[object Float64Array]",ft="[object Int8Array]",ht="[object Int16Array]",pt="[object Int32Array]",dt="[object Uint8Array]",gt="[object Uint8ClampedArray]",vt="[object Uint16Array]",yt="[object Uint32Array]",mt=/\b__p \+= '';/g,wt=/\b(__p \+=) '' \+/g,_t=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bt=/&(?:amp|lt|gt|quot|#39);/g,Ct=/[&<>"']/g,St=RegExp(bt.source),Et=RegExp(Ct.source),xt=/<%-([\s\S]+?)%>/g,Rt=/<%([\s\S]+?)%>/g,At=/<%=([\s\S]+?)%>/g,It=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kt=/^\w*$/,Tt=/^\./,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wt=/[\\^$.*+?()[\]{}|]/g,Mt=RegExp(Wt.source),jt=/^\s+|\s+$/g,Lt=/^\s+/,Dt=/\s+$/,Pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ft=/\{\n\/\* \[wrapped with (.+)\] \*/,zt=/,? & /,Ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$t=/\\(\\)?/g,Nt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Bt=/\w*$/,qt=/^[-+]0x[0-9a-f]+$/i,Ht=/^0b[01]+$/i,Vt=/^\[object .+?Constructor\]$/,Gt=/^0o[0-7]+$/i,Jt=/^(?:0|[1-9]\d*)$/,Zt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kt=/($^)/,Yt=/['\n\r\u2028\u2029\\]/g,Qt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Xt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",en="["+Xt+"]",tn="["+Qt+"]",nn="[a-z\\xdf-\\xf6\\xf8-\\xff]",rn="[^\\ud800-\\udfff"+Xt+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",on="\\ud83c[\\udffb-\\udfff]",an="(?:\\ud83c[\\udde6-\\uddff]){2}",sn="[\\ud800-\\udbff][\\udc00-\\udfff]",un="[A-Z\\xc0-\\xd6\\xd8-\\xde]",cn="(?:"+nn+"|"+rn+")",ln="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",fn="[\\ufe0e\\ufe0f]?"+ln+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",an,sn].join("|")+")[\\ufe0e\\ufe0f]?"+ln+")*"),hn="(?:"+["[\\u2700-\\u27bf]",an,sn].join("|")+")"+fn,pn="(?:"+["[^\\ud800-\\udfff]"+tn+"?",tn,an,sn,"[\\ud800-\\udfff]"].join("|")+")",dn=RegExp("['’]","g"),gn=RegExp(tn,"g"),vn=RegExp(on+"(?="+on+")|"+pn+fn,"g"),yn=RegExp([un+"?"+nn+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[en,un,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[en,un+cn,"$"].join("|")+")",un+"?"+cn+"+(?:['’](?:d|ll|m|re|s|t|ve))?",un+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)","\\d+",hn].join("|"),"g"),mn=RegExp("[\\u200d\\ud800-\\udfff"+Qt+"\\ufe0e\\ufe0f]"),wn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_n=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],bn=-1,Cn={};Cn[ct]=Cn[lt]=Cn[ft]=Cn[ht]=Cn[pt]=Cn[dt]=Cn[gt]=Cn[vt]=Cn[yt]=!0,Cn[Ue]=Cn[$e]=Cn[st]=Cn[Be]=Cn[ut]=Cn[qe]=Cn[Ve]=Cn[Ge]=Cn[Ze]=Cn[Ke]=Cn[Qe]=Cn[et]=Cn[tt]=Cn[nt]=Cn[ot]=!1;var Sn={};Sn[Ue]=Sn[$e]=Sn[st]=Sn[ut]=Sn[Be]=Sn[qe]=Sn[ct]=Sn[lt]=Sn[ft]=Sn[ht]=Sn[pt]=Sn[Ze]=Sn[Ke]=Sn[Qe]=Sn[et]=Sn[tt]=Sn[nt]=Sn[rt]=Sn[dt]=Sn[gt]=Sn[vt]=Sn[yt]=!0,Sn[Ve]=Sn[Ge]=Sn[ot]=!1;var En={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},xn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Rn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},An={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},In=parseFloat,kn=parseInt,Tn="object"==typeof e&&e&&e.Object===Object&&e,On="object"==typeof self&&self&&self.Object===Object&&self,Wn=Tn||On||Function("return this")(),Mn="object"==typeof t&&t&&!t.nodeType&&t,jn=Mn&&"object"==typeof r&&r&&!r.nodeType&&r,Ln=jn&&jn.exports===Mn,Dn=Ln&&Tn.process,Pn=function(){try{return Dn&&Dn.binding&&Dn.binding("util")}catch(e){}}(),Fn=Pn&&Pn.isArrayBuffer,zn=Pn&&Pn.isDate,Un=Pn&&Pn.isMap,$n=Pn&&Pn.isRegExp,Nn=Pn&&Pn.isSet,Bn=Pn&&Pn.isTypedArray,qn=I("length"),Hn=k(En),Vn=k(xn),Gn=k(Rn),Jn=function e(t){function n(e){if(ta(e)&&!qu(e)&&!(e instanceof _)){if(e instanceof i)return e;if(qa.call(e,"__wrapped__"))return xo(e)}return new i(e)}function r(){}function i(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=ie}function _(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=De,this.__views__=[]}function k(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Y(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function te(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ne(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new te;++t<n;)this.add(e[t])}function Ut(e){var t=this.__data__=new Y(e);this.size=t.size}function Qt(e,t){var n=qu(e),r=!n&&Bu(e),i=!n&&!r&&Vu(e),o=!n&&!r&&!i&&Yu(e),a=n||r||i||o,s=a?M(e.length,Pa):[],u=s.length;for(var c in e)!t&&!qa.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ro(c,u))||s.push(c);return s}function Xt(e){var t=e.length;return t?e[Cr(0,t-1)]:ie}function en(e,t){return bo(ai(e),fn(t,0,e.length))}function tn(e){return bo(ai(e))}function nn(e,t,n){(n===ie||Go(e[t],n))&&(n!==ie||t in e)||cn(e,t,n)}function rn(e,t,n){var r=e[t];qa.call(e,t)&&Go(r,n)&&(n!==ie||t in e)||cn(e,t,n)}function on(e,t){for(var n=e.length;n--;)if(Go(e[n][0],t))return n;return-1}function an(e,t,n,r){return Ns(e,function(e,i,o){t(r,e,n(e),o)}),r}function sn(e,t){return e&&si(t,ga(t),e)}function un(e,t){return e&&si(t,va(t),e)}function cn(e,t,n){"__proto__"==t&&us?us(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ln(e,t){for(var n=-1,r=t.length,i=Ta(r),o=null==e;++n<r;)i[n]=o?ie:pa(e,t[n]);return i}function fn(e,t,n){return e===e&&(n!==ie&&(e=e<=n?e:n),t!==ie&&(e=e>=t?e:t)),e}function hn(e,t,n,r,i,o){var a,s=t&fe,u=t&he,l=t&pe;if(n&&(a=i?n(e,r,i,o):n(e)),a!==ie)return a;if(!ea(e))return e;var f=qu(e);if(f){if(a=Qi(e),!s)return ai(e,a)}else{var h=eu(e),p=h==Ge||h==Je;if(Vu(e))return Jr(e,s);if(h==Qe||h==Ue||p&&!i){if(a=u||p?{}:Xi(e),!s)return u?ci(e,un(a,e)):ui(e,sn(a,e))}else{if(!Sn[h])return i?e:{};a=eo(e,h,hn,s)}}o||(o=new Ut);var d=o.get(e);if(d)return d;o.set(e,a);var g=l?u?$i:Ui:u?va:ga,v=f?ie:g(e);return c(v||e,function(r,i){v&&(r=e[i=r]),rn(a,i,hn(r,t,n,i,e,o))}),a}function pn(e){var t=ga(e);return function(n){return vn(n,e,t)}}function vn(e,t,n){var r=n.length;if(null==e)return!r;for(e=La(e);r--;){var i=n[r],o=t[i],a=e[i];if(a===ie&&!(i in e)||!o(a))return!1}return!0}function yn(e,t,n){if("function"!=typeof e)throw new Fa(se);return ru(function(){e.apply(ie,n)},t)}function mn(e,t,n,r){var i=-1,o=p,a=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=g(t,L(n))),r?(o=d,a=!1):t.length>=oe&&(o=P,a=!1,t=new ne(t));e:for(;++i<s;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f===f){for(var h=c;h--;)if(t[h]===f)continue e;u.push(l)}else o(t,f,r)||u.push(l)}return u}function wn(e,t){var n=!0;return Ns(e,function(e,r,i){return n=!!t(e,r,i)}),n}function En(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(s===ie?a===a&&!oa(a):n(a,s)))var s=a,u=o}return u}function xn(e,t,n,r){var i=e.length;for((n=ua(n))<0&&(n=-n>i?0:i+n),(r=r===ie||r>i?i:ua(r))<0&&(r+=i),r=n>r?0:ca(r);n<r;)e[n++]=t;return e}function Rn(e,t){var n=[];return Ns(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function An(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=no),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?An(s,t-1,n,r,i):v(i,s):r||(i[i.length]=s)}return i}function Tn(e,t){return e&&qs(e,t,ga)}function On(e,t){return e&&Hs(e,t,ga)}function Mn(e,t){return h(t,function(t){return Yo(e[t])})}function jn(e,t){for(var n=0,r=(t=Vr(t,e)).length;null!=e&&n<r;)e=e[Co(t[n++])];return n&&n==r?e:ie}function Dn(e,t,n){var r=t(e);return qu(e)?r:v(r,n(e))}function Pn(e){return null==e?e===ie?it:Ye:ss&&ss in La(e)?Ji(e):go(e)}function qn(e,t){return e>t}function Zn(e,t){return null!=e&&qa.call(e,t)}function Kn(e,t){return null!=e&&t in La(e)}function Yn(e,t,n){return e>=_s(t,n)&&e<ws(t,n)}function Qn(e,t,n){for(var r=n?d:p,i=e[0].length,o=e.length,a=o,s=Ta(o),u=1/0,c=[];a--;){var l=e[a];a&&t&&(l=g(l,L(t))),u=_s(l.length,u),s[a]=!n&&(t||i>=120&&l.length>=120)?new ne(a&&l):ie}l=e[0];var f=-1,h=s[0];e:for(;++f<i&&c.length<u;){var v=l[f],y=t?t(v):v;if(v=n||0!==v?v:0,!(h?P(h,y):r(c,y,n))){for(a=o;--a;){var m=s[a];if(!(m?P(m,y):r(e[a],y,n)))continue e}h&&h.push(y),c.push(v)}}return c}function Xn(e,t,n,r){return Tn(e,function(e,i,o){t(r,n(e),i,o)}),r}function er(e,t,n){var r=null==(e=yo(e,t=Vr(t,e)))?e:e[Co(To(t))];return null==r?ie:s(r,e,n)}function tr(e){return ta(e)&&Pn(e)==Ue}function nr(e,t,n,r,i){return e===t||(null==e||null==t||!ta(e)&&!ta(t)?e!==e&&t!==t:rr(e,t,n,r,nr,i))}function rr(e,t,n,r,i,o){var a=qu(e),s=qu(t),u=a?$e:eu(e),c=s?$e:eu(t),l=(u=u==Ue?Qe:u)==Qe,f=(c=c==Ue?Qe:c)==Qe,h=u==c;if(h&&Vu(e)){if(!Vu(t))return!1;a=!0,l=!1}if(h&&!l)return o||(o=new Ut),a||Yu(e)?Di(e,t,n,r,i,o):Pi(e,t,u,n,r,i,o);if(!(n&de)){var p=l&&qa.call(e,"__wrapped__"),d=f&&qa.call(t,"__wrapped__");if(p||d){var g=p?e.value():e,v=d?t.value():t;return o||(o=new Ut),i(g,v,n,r,o)}}return!!h&&(o||(o=new Ut),Fi(e,t,n,r,i,o))}function ir(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=La(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=n[i])[0],c=e[u],l=s[1];if(a&&s[2]){if(c===ie&&!(u in e))return!1}else{var f=new Ut;if(r)var h=r(c,l,u,e,t,f);if(!(h===ie?nr(l,c,de|ge,r,f):h))return!1}}return!0}function or(e){return!(!ea(e)||uo(e))&&(Yo(e)?Ka:Vt).test(So(e))}function ar(e){return"function"==typeof e?e:null==e?Sa:"object"==typeof e?qu(e)?hr(e[0],e[1]):fr(e):Aa(e)}function sr(e){if(!co(e))return ms(e);var t=[];for(var n in La(e))qa.call(e,n)&&"constructor"!=n&&t.push(n);return t}function ur(e){if(!ea(e))return po(e);var t=co(e),n=[];for(var r in e)("constructor"!=r||!t&&qa.call(e,r))&&n.push(r);return n}function cr(e,t){return e<t}function lr(e,t){var n=-1,r=Jo(e)?Ta(e.length):[];return Ns(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function fr(e){var t=Vi(e);return 1==t.length&&t[0][2]?fo(t[0][0],t[0][1]):function(n){return n===e||ir(n,e,t)}}function hr(e,t){return oo(e)&&lo(t)?fo(Co(e),t):function(n){var r=pa(n,e);return r===ie&&r===t?da(n,e):nr(t,r,de|ge)}}function pr(e,t,n,r,i){e!==t&&qs(t,function(o,a){if(ea(o))i||(i=new Ut),dr(e,t,a,n,pr,r,i);else{var s=r?r(e[a],o,a+"",e,t,i):ie;s===ie&&(s=o),nn(e,a,s)}},va)}function dr(e,t,n,r,i,o,a){var s=e[n],u=t[n],c=a.get(u);if(c)nn(e,n,c);else{var l=o?o(s,u,n+"",e,t,a):ie,f=l===ie;if(f){var h=qu(u),p=!h&&Vu(u),d=!h&&!p&&Yu(u);l=u,h||p||d?qu(s)?l=s:Zo(s)?l=ai(s):p?(f=!1,l=Jr(u,!0)):d?(f=!1,l=ti(u,!0)):l=[]:ra(u)||Bu(u)?(l=s,Bu(s)?l=fa(s):(!ea(s)||r&&Yo(s))&&(l=Xi(u))):f=!1}f&&(a.set(u,l),i(l,u,r,o,a),a.delete(u)),nn(e,n,l)}}function gr(e,t){var n=e.length;if(n)return t+=t<0?n:0,ro(t,n)?e[t]:ie}function vr(e,t,n){var r=-1;return t=g(t.length?t:[Sa],L(qi())),O(lr(e,function(e,n,i){return{criteria:g(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return ri(e,t,n)})}function yr(e,t){return mr(e,t,function(t,n){return da(e,n)})}function mr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=jn(e,a);n(s,a)&&Ir(o,Vr(a,e),s)}return o}function wr(e){return function(t){return jn(t,e)}}function _r(e,t,n,r){var i=r?x:E,o=-1,a=t.length,s=e;for(e===t&&(t=ai(t)),n&&(s=g(e,L(n)));++o<a;)for(var u=0,c=t[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==e&&is.call(s,u,1),is.call(e,u,1);return e}function br(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;ro(i)?is.call(e,i,1):Fr(e,i)}}return e}function Cr(e,t){return e+ps(Ss()*(t-e+1))}function Sr(e,t,n,r){for(var i=-1,o=ws(hs((t-e)/(n||1)),0),a=Ta(o);o--;)a[r?o:++i]=e,e+=n;return a}function Er(e,t){var n="";if(!e||t<1||t>Me)return n;do{t%2&&(n+=e),(t=ps(t/2))&&(e+=e)}while(t);return n}function xr(e,t){return iu(vo(e,t,Sa),e+"")}function Rr(e){return Xt(ma(e))}function Ar(e,t){var n=ma(e);return bo(n,fn(t,0,n.length))}function Ir(e,t,n,r){if(!ea(e))return e;for(var i=-1,o=(t=Vr(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var u=Co(t[i]),c=n;if(i!=a){var l=s[u];(c=r?r(l,u,s):ie)===ie&&(c=ea(l)?l:ro(t[i+1])?[]:{})}rn(s,u,c),s=s[u]}return e}function kr(e){return bo(ma(e))}function Tr(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Ta(i);++r<i;)o[r]=e[r+t];return o}function Or(e,t){var n;return Ns(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function Wr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=Fe){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!oa(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return Mr(e,t,Sa,n)}function Mr(e,t,n,r){t=n(t);for(var i=0,o=null==e?0:e.length,a=t!==t,s=null===t,u=oa(t),c=t===ie;i<o;){var l=ps((i+o)/2),f=n(e[l]),h=f!==ie,p=null===f,d=f===f,g=oa(f);if(a)var v=r||d;else v=c?d&&(r||h):s?d&&h&&(r||!p):u?d&&h&&!p&&(r||!g):!p&&!g&&(r?f<=t:f<t);v?i=l+1:o=l}return _s(o,Pe)}function jr(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Go(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Lr(e){return"number"==typeof e?e:oa(e)?Le:+e}function Dr(e){if("string"==typeof e)return e;if(qu(e))return g(e,Dr)+"";if(oa(e))return Us?Us.call(e):"";var t=e+"";return"0"==t&&1/e==-We?"-0":t}function Pr(e,t,n){var r=-1,i=p,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=d;else if(o>=oe){var c=t?null:Ks(e);if(c)return Z(c);a=!1,i=P,u=new ne}else u=t?[]:s;e:for(;++r<o;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,a&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),s.push(l)}else i(u,f,n)||(u!==s&&u.push(f),s.push(l))}return s}function Fr(e,t){return t=Vr(t,e),null==(e=yo(e,t))||delete e[Co(To(t))]}function zr(e,t,n,r){return Ir(e,t,n(jn(e,t)),r)}function Ur(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Tr(e,r?0:o,r?o+1:i):Tr(e,r?o+1:0,r?i:o)}function $r(e,t){var n=e;return n instanceof _&&(n=n.value()),y(t,function(e,t){return t.func.apply(t.thisArg,v([e],t.args))},n)}function Nr(e,t,n){var r=e.length;if(r<2)return r?Pr(e[0]):[];for(var i=-1,o=Ta(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=mn(o[i]||a,e[s],t,n));return Pr(An(o,1),t,n)}function Br(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:ie;n(a,e[r],s)}return a}function qr(e){return Zo(e)?e:[]}function Hr(e){return"function"==typeof e?e:Sa}function Vr(e,t){return qu(e)?e:oo(e,t)?[e]:ou(ha(e))}function Gr(e,t,n){var r=e.length;return n=n===ie?r:n,!t&&n>=r?e:Tr(e,t,n)}function Jr(e,t){if(t)return e.slice();var n=e.length,r=es?es(n):new e.constructor(n);return e.copy(r),r}function Zr(e){var t=new e.constructor(e.byteLength);return new Xa(t).set(new Xa(e)),t}function Kr(e,t){var n=t?Zr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Yr(e,t,n){return y(t?n(V(e),fe):V(e),o,new e.constructor)}function Qr(e){var t=new e.constructor(e.source,Bt.exec(e));return t.lastIndex=e.lastIndex,t}function Xr(e,t,n){return y(t?n(Z(e),fe):Z(e),a,new e.constructor)}function ei(e){return zs?La(zs.call(e)):{}}function ti(e,t){var n=t?Zr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ni(e,t){if(e!==t){var n=e!==ie,r=null===e,i=e===e,o=oa(e),a=t!==ie,s=null===t,u=t===t,c=oa(t);if(!s&&!c&&!o&&e>t||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function ri(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var u=ni(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}function ii(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,u=t.length,c=ws(o-a,0),l=Ta(u+c),f=!r;++s<u;)l[s]=t[s];for(;++i<a;)(f||i<o)&&(l[n[i]]=e[i]);for(;c--;)l[s++]=e[i++];return l}function oi(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,u=-1,c=t.length,l=ws(o-s,0),f=Ta(l+c),h=!r;++i<l;)f[i]=e[i];for(var p=i;++u<c;)f[p+u]=t[u];for(;++a<s;)(h||i<o)&&(f[p+n[a]]=e[i++]);return f}function ai(e,t){var n=-1,r=e.length;for(t||(t=Ta(r));++n<r;)t[n]=e[n];return t}function si(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=r?r(n[s],e[s],s,n,e):ie;u===ie&&(u=e[s]),i?cn(n,s,u):rn(n,s,u)}return n}function ui(e,t){return si(e,Qs(e),t)}function ci(e,t){return si(e,Xs(e),t)}function li(e,t){return function(n,r){var i=qu(n)?u:an,o=t?t():{};return i(n,e,qi(r,2),o)}}function fi(e){return xr(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:ie,a=i>2?n[2]:ie;for(o=e.length>3&&"function"==typeof o?(i--,o):ie,a&&io(n[0],n[1],a)&&(o=i<3?ie:o,i=1),t=La(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t})}function hi(e,t){return function(n,r){if(null==n)return n;if(!Jo(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=La(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function pi(e){return function(t,n,r){for(var i=-1,o=La(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function di(e,t,n){function r(){return(this&&this!==Wn&&this instanceof r?o:e).apply(i?n:this,arguments)}var i=t&ve,o=yi(e);return r}function gi(e){return function(t){var n=B(t=ha(t))?ee(t):ie,r=n?n[0]:t.charAt(0),i=n?Gr(n,1).join(""):t.slice(1);return r[e]()+i}}function vi(e){return function(t){return y(ba(_a(t).replace(dn,"")),e,"")}}function yi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=$s(e.prototype),r=e.apply(n,t);return ea(r)?r:n}}function mi(e,t,n){function r(){for(var o=arguments.length,a=Ta(o),u=o,c=Bi(r);u--;)a[u]=arguments[u];var l=o<3&&a[0]!==c&&a[o-1]!==c?[]:J(a,c);return(o-=l.length)<n?ki(e,t,bi,r.placeholder,ie,a,l,ie,ie,n-o):s(this&&this!==Wn&&this instanceof r?i:e,this,a)}var i=yi(e);return r}function wi(e){return function(t,n,r){var i=La(t);if(!Jo(t)){var o=qi(n,3);t=ga(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:ie}}function _i(e){return zi(function(t){var n=t.length,r=n,o=i.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new Fa(se);if(o&&!s&&"wrapper"==Ni(a))var s=new i([],!0)}for(r=s?r:n;++r<n;){var u=Ni(a=t[r]),c="wrapper"==u?Ys(a):ie;s=c&&so(c[0])&&c[1]==(Se|we|be|Ee)&&!c[4].length&&1==c[9]?s[Ni(c[0])].apply(s,c[3]):1==a.length&&so(a)?s[u]():s.thru(a)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&qu(r))return s.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}function bi(e,t,n,r,i,o,a,s,u,c){function l(){for(var y=arguments.length,m=Ta(y),w=y;w--;)m[w]=arguments[w];if(d)var _=Bi(l),b=U(m,_);if(r&&(m=ii(m,r,i,d)),o&&(m=oi(m,o,a,d)),y-=b,d&&y<c){var C=J(m,_);return ki(e,t,bi,l.placeholder,n,m,C,s,u,c-y)}var S=h?n:this,E=p?S[e]:e;return y=m.length,s?m=mo(m,s):g&&y>1&&m.reverse(),f&&u<y&&(m.length=u),this&&this!==Wn&&this instanceof l&&(E=v||yi(E)),E.apply(S,m)}var f=t&Se,h=t&ve,p=t&ye,d=t&(we|_e),g=t&xe,v=p?ie:yi(e);return l}function Ci(e,t){return function(n,r){return Xn(n,e,t(r),{})}}function Si(e,t){return function(n,r){var i;if(n===ie&&r===ie)return t;if(n!==ie&&(i=n),r!==ie){if(i===ie)return r;"string"==typeof n||"string"==typeof r?(n=Dr(n),r=Dr(r)):(n=Lr(n),r=Lr(r)),i=e(n,r)}return i}}function Ei(e){return zi(function(t){return t=g(t,L(qi())),xr(function(n){var r=this;return e(t,function(e){return s(e,r,n)})})})}function xi(e,t){var n=(t=t===ie?" ":Dr(t)).length;if(n<2)return n?Er(t,e):t;var r=Er(t,hs(e/X(t)));return B(t)?Gr(ee(r),0,e).join(""):r.slice(0,e)}function Ri(e,t,n,r){function i(){for(var t=-1,u=arguments.length,c=-1,l=r.length,f=Ta(l+u),h=this&&this!==Wn&&this instanceof i?a:e;++c<l;)f[c]=r[c];for(;u--;)f[c++]=arguments[++t];return s(h,o?n:this,f)}var o=t&ve,a=yi(e);return i}function Ai(e){return function(t,n,r){return r&&"number"!=typeof r&&io(t,n,r)&&(n=r=ie),t=sa(t),n===ie?(n=t,t=0):n=sa(n),r=r===ie?t<n?1:-1:sa(r),Sr(t,n,r,e)}}function Ii(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=la(t),n=la(n)),e(t,n)}}function ki(e,t,n,r,i,o,a,s,u,c){var l=t&we,f=l?a:ie,h=l?ie:a,p=l?o:ie,d=l?ie:o;t|=l?be:Ce,(t&=~(l?Ce:be))&me||(t&=~(ve|ye));var g=[e,t,i,p,f,d,h,s,u,c],v=n.apply(ie,g);return so(e)&&nu(v,g),v.placeholder=r,wo(v,e,t)}function Ti(e){var t=ja[e];return function(e,n){if(e=la(e),n=null==n?0:_s(ua(n),292)){var r=(ha(e)+"e").split("e");return+((r=(ha(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}function Oi(e){return function(t){var n=eu(t);return n==Ze?V(t):n==tt?K(t):j(t,e(t))}}function Wi(e,t,n,r,i,o,a,s){var u=t&ye;if(!u&&"function"!=typeof e)throw new Fa(se);var c=r?r.length:0;if(c||(t&=~(be|Ce),r=i=ie),a=a===ie?a:ws(ua(a),0),s=s===ie?s:ua(s),c-=i?i.length:0,t&Ce){var l=r,f=i;r=i=ie}var h=u?ie:Ys(e),p=[e,t,n,r,i,l,f,o,a,s];if(h&&ho(p,h),e=p[0],t=p[1],n=p[2],r=p[3],i=p[4],!(s=p[9]=p[9]===ie?u?0:e.length:ws(p[9]-c,0))&&t&(we|_e)&&(t&=~(we|_e)),t&&t!=ve)d=t==we||t==_e?mi(e,t,s):t!=be&&t!=(ve|be)||i.length?bi.apply(ie,p):Ri(e,t,n,r);else var d=di(e,t,n);return wo((h?Vs:nu)(d,p),e,t)}function Mi(e,t,n,r){return e===ie||Go(e,$a[n])&&!qa.call(r,n)?t:e}function ji(e,t,n,r,i,o){return ea(e)&&ea(t)&&(o.set(t,e),pr(e,t,ie,ji,o),o.delete(t)),e}function Li(e){return ra(e)?ie:e}function Di(e,t,n,r,i,o){var a=n&de,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var l=-1,f=!0,h=n&ge?new ne:ie;for(o.set(e,t),o.set(t,e);++l<s;){var p=e[l],d=t[l];if(r)var g=a?r(d,p,l,t,e,o):r(p,d,l,e,t,o);if(g!==ie){if(g)continue;f=!1;break}if(h){if(!w(t,function(e,t){if(!P(h,t)&&(p===e||i(p,e,n,r,o)))return h.push(t)})){f=!1;break}}else if(p!==d&&!i(p,d,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function Pi(e,t,n,r,i,o,a){switch(n){case ut:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case st:return!(e.byteLength!=t.byteLength||!o(new Xa(e),new Xa(t)));case Be:case qe:case Ke:return Go(+e,+t);case Ve:return e.name==t.name&&e.message==t.message;case et:case nt:return e==t+"";case Ze:var s=V;case tt:var u=r&de;if(s||(s=Z),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=ge,a.set(e,t);var l=Di(s(e),s(t),r,i,o,a);return a.delete(e),l;case rt:if(zs)return zs.call(e)==zs.call(t)}return!1}function Fi(e,t,n,r,i,o){var a=n&de,s=Ui(e),u=s.length;if(u!=Ui(t).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in t:qa.call(t,l)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var h=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<u;){var d=e[l=s[c]],g=t[l];if(r)var v=a?r(g,d,l,t,e,o):r(d,g,l,e,t,o);if(!(v===ie?d===g||i(d,g,n,r,o):v)){h=!1;break}p||(p="constructor"==l)}if(h&&!p){var y=e.constructor,m=t.constructor;y!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m)&&(h=!1)}return o.delete(e),o.delete(t),h}function zi(e){return iu(vo(e,ie,Io),e+"")}function Ui(e){return Dn(e,ga,Qs)}function $i(e){return Dn(e,va,Xs)}function Ni(e){for(var t=e.name+"",n=Ws[t],r=qa.call(Ws,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Bi(e){return(qa.call(n,"placeholder")?n:e).placeholder}function qi(){var e=n.iteratee||Ea;return e=e===Ea?ar:e,arguments.length?e(arguments[0],arguments[1]):e}function Hi(e,t){var n=e.__data__;return ao(t)?n["string"==typeof t?"string":"hash"]:n.map}function Vi(e){for(var t=ga(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,lo(i)]}return t}function Gi(e,t){var n=N(e,t);return or(n)?n:ie}function Ji(e){var t=qa.call(e,ss),n=e[ss];try{e[ss]=ie;var r=!0}catch(e){}var i=Ga.call(e);return r&&(t?e[ss]=n:delete e[ss]),i}function Zi(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=_s(t,e+a);break;case"takeRight":e=ws(e,t-a)}}return{start:e,end:t}}function Ki(e){var t=e.match(Ft);return t?t[1].split(zt):[]}function Yi(e,t,n){for(var r=-1,i=(t=Vr(t,e)).length,o=!1;++r<i;){var a=Co(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Xo(i)&&ro(a,i)&&(qu(e)||Bu(e))}function Qi(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&qa.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Xi(e){return"function"!=typeof e.constructor||co(e)?{}:$s(ts(e))}function eo(e,t,n,r){var i=e.constructor;switch(t){case st:return Zr(e);case Be:case qe:return new i(+e);case ut:return Kr(e,r);case ct:case lt:case ft:case ht:case pt:case dt:case gt:case vt:case yt:return ti(e,r);case Ze:return Yr(e,r,n);case Ke:case nt:return new i(e);case et:return Qr(e);case tt:return Xr(e,r,n);case rt:return ei(e)}}function to(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Pt,"{\n/* [wrapped with "+t+"] */\n")}function no(e){return qu(e)||Bu(e)||!!(os&&e&&e[os])}function ro(e,t){return!!(t=null==t?Me:t)&&("number"==typeof e||Jt.test(e))&&e>-1&&e%1==0&&e<t}function io(e,t,n){if(!ea(n))return!1;var r=typeof t;return!!("number"==r?Jo(n)&&ro(t,n.length):"string"==r&&t in n)&&Go(n[t],e)}function oo(e,t){if(qu(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!oa(e))||kt.test(e)||!It.test(e)||null!=t&&e in La(t)}function ao(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function so(e){var t=Ni(e),r=n[t];if("function"!=typeof r||!(t in _.prototype))return!1;if(e===r)return!0;var i=Ys(r);return!!i&&e===i[0]}function uo(e){return!!Va&&Va in e}function co(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||$a)}function lo(e){return e===e&&!ea(e)}function fo(e,t){return function(n){return null!=n&&n[e]===t&&(t!==ie||e in La(n))}}function ho(e,t){var n=e[1],r=t[1],i=n|r,o=i<(ve|ye|Se),a=r==Se&&n==we||r==Se&&n==Ee&&e[7].length<=t[8]||r==(Se|Ee)&&t[7].length<=t[8]&&n==we;if(!o&&!a)return e;r&ve&&(e[2]=t[2],i|=n&ve?0:me);var s=t[3];if(s){var u=e[3];e[3]=u?ii(u,s,t[4]):s,e[4]=u?J(e[3],le):t[4]}return(s=t[5])&&(u=e[5],e[5]=u?oi(u,s,t[6]):s,e[6]=u?J(e[5],le):t[6]),(s=t[7])&&(e[7]=s),r&Se&&(e[8]=null==e[8]?t[8]:_s(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function po(e){var t=[];if(null!=e)for(var n in La(e))t.push(n);return t}function go(e){return Ga.call(e)}function vo(e,t,n){return t=ws(t===ie?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=ws(r.length-t,0),a=Ta(o);++i<o;)a[i]=r[t+i];i=-1;for(var u=Ta(t+1);++i<t;)u[i]=r[i];return u[t]=n(a),s(e,this,u)}}function yo(e,t){return t.length<2?e:jn(e,Tr(t,0,-1))}function mo(e,t){for(var n=e.length,r=_s(t.length,n),i=ai(e);r--;){var o=t[r];e[r]=ro(o,n)?i[o]:ie}return e}function wo(e,t,n){var r=t+"";return iu(e,to(r,Eo(Ki(r),n)))}function _o(e){var t=0,n=0;return function(){var r=bs(),i=ke-(r-n);if(n=r,i>0){if(++t>=Ie)return arguments[0]}else t=0;return e.apply(ie,arguments)}}function bo(e,t){var n=-1,r=e.length,i=r-1;for(t=t===ie?r:t;++n<t;){var o=Cr(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}function Co(e){if("string"==typeof e||oa(e))return e;var t=e+"";return"0"==t&&1/e==-We?"-0":t}function So(e){if(null!=e){try{return Ba.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Eo(e,t){return c(ze,function(n){var r="_."+n[0];t&n[1]&&!p(e,r)&&e.push(r)}),e.sort()}function xo(e){if(e instanceof _)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=ai(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Ro(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ua(n);return i<0&&(i=ws(r+i,0)),S(e,qi(t,3),i)}function Ao(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==ie&&(i=ua(n),i=n<0?ws(r+i,0):_s(i,r-1)),S(e,qi(t,3),i,!0)}function Io(e){return(null==e?0:e.length)?An(e,1):[]}function ko(e){return e&&e.length?e[0]:ie}function To(e){var t=null==e?0:e.length;return t?e[t-1]:ie}function Oo(e,t){return e&&e.length&&t&&t.length?_r(e,t):e}function Wo(e){return null==e?e:Es.call(e)}function Mo(e){if(!e||!e.length)return[];var t=0;return e=h(e,function(e){if(Zo(e))return t=ws(e.length,t),!0}),M(t,function(t){return g(e,I(t))})}function jo(e,t){if(!e||!e.length)return[];var n=Mo(e);return null==t?n:g(n,function(e){return s(t,ie,e)})}function Lo(e){var t=n(e);return t.__chain__=!0,t}function Do(e,t){return t(e)}function Po(e,t){return(qu(e)?c:Ns)(e,qi(t,3))}function Fo(e,t){return(qu(e)?l:Bs)(e,qi(t,3))}function zo(e,t){return(qu(e)?g:lr)(e,qi(t,3))}function Uo(e,t,n){return t=n?ie:t,t=e&&null==t?e.length:t,Wi(e,Se,ie,ie,ie,ie,t)}function $o(e,t){var n;if("function"!=typeof t)throw new Fa(se);return e=ua(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=ie),n}}function No(e,t,n){var r=Wi(e,we,ie,ie,ie,ie,ie,t=n?ie:t);return r.placeholder=No.placeholder,r}function Bo(e,t,n){var r=Wi(e,_e,ie,ie,ie,ie,ie,t=n?ie:t);return r.placeholder=Bo.placeholder,r}function qo(e,t,n){function r(t){var n=l,r=f;return l=f=ie,v=t,p=e.apply(r,n)}function i(e){return v=e,d=ru(s,t),y?r(e):p}function o(e){var n=e-v,r=t-(e-g);return m?_s(r,h-n):r}function a(e){var n=e-g,r=e-v;return g===ie||n>=t||n<0||m&&r>=h}function s(){var e=Wu();if(a(e))return u(e);d=ru(s,o(e))}function u(e){return d=ie,w&&l?r(e):(l=f=ie,p)}function c(){var e=Wu(),n=a(e);if(l=arguments,f=this,g=e,n){if(d===ie)return i(g);if(m)return d=ru(s,t),r(g)}return d===ie&&(d=ru(s,t)),p}var l,f,h,p,d,g,v=0,y=!1,m=!1,w=!0;if("function"!=typeof e)throw new Fa(se);return t=la(t)||0,ea(n)&&(y=!!n.leading,h=(m="maxWait"in n)?ws(la(n.maxWait)||0,t):h,w="trailing"in n?!!n.trailing:w),c.cancel=function(){d!==ie&&Zs(d),v=0,l=g=f=d=ie},c.flush=function(){return d===ie?p:u(Wu())},c}function Ho(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Fa(se);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ho.Cache||te),n}function Vo(e){if("function"!=typeof e)throw new Fa(se);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Go(e,t){return e===t||e!==e&&t!==t}function Jo(e){return null!=e&&Xo(e.length)&&!Yo(e)}function Zo(e){return ta(e)&&Jo(e)}function Ko(e){if(!ta(e))return!1;var t=Pn(e);return t==Ve||t==He||"string"==typeof e.message&&"string"==typeof e.name&&!ra(e)}function Yo(e){if(!ea(e))return!1;var t=Pn(e);return t==Ge||t==Je||t==Ne||t==Xe}function Qo(e){return"number"==typeof e&&e==ua(e)}function Xo(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Me}function ea(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ta(e){return null!=e&&"object"==typeof e}function na(e){return"number"==typeof e||ta(e)&&Pn(e)==Ke}function ra(e){if(!ta(e)||Pn(e)!=Qe)return!1;var t=ts(e);if(null===t)return!0;var n=qa.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ba.call(n)==Ja}function ia(e){return"string"==typeof e||!qu(e)&&ta(e)&&Pn(e)==nt}function oa(e){return"symbol"==typeof e||ta(e)&&Pn(e)==rt}function aa(e){if(!e)return[];if(Jo(e))return ia(e)?ee(e):ai(e);if(as&&e[as])return H(e[as]());var t=eu(e);return(t==Ze?V:t==tt?Z:ma)(e)}function sa(e){return e?(e=la(e))===We||e===-We?(e<0?-1:1)*je:e===e?e:0:0===e?e:0}function ua(e){var t=sa(e),n=t%1;return t===t?n?t-n:t:0}function ca(e){return e?fn(ua(e),0,De):0}function la(e){if("number"==typeof e)return e;if(oa(e))return Le;if(ea(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ea(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(jt,"");var n=Ht.test(e);return n||Gt.test(e)?kn(e.slice(2),n?2:8):qt.test(e)?Le:+e}function fa(e){return si(e,va(e))}function ha(e){return null==e?"":Dr(e)}function pa(e,t,n){var r=null==e?ie:jn(e,t);return r===ie?n:r}function da(e,t){return null!=e&&Yi(e,t,Kn)}function ga(e){return Jo(e)?Qt(e):sr(e)}function va(e){return Jo(e)?Qt(e,!0):ur(e)}function ya(e,t){if(null==e)return{};var n=g($i(e),function(e){return[e]});return t=qi(t),mr(e,n,function(e,n){return t(e,n[0])})}function ma(e){return null==e?[]:D(e,ga(e))}function wa(e){return Sc(ha(e).toLowerCase())}function _a(e){return(e=ha(e))&&e.replace(Zt,Hn).replace(gn,"")}function ba(e,t,n){return e=ha(e),(t=n?ie:t)===ie?q(e)?re(e):b(e):e.match(t)||[]}function Ca(e){return function(){return e}}function Sa(e){return e}function Ea(e){return ar("function"==typeof e?e:hn(e,fe))}function xa(e,t,n){var r=ga(t),i=Mn(t,r);null!=n||ea(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Mn(t,ga(t)));var o=!(ea(n)&&"chain"in n&&!n.chain),a=Yo(e);return c(i,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=ai(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,v([this.value()],arguments))})}),e}function Ra(){}function Aa(e){return oo(e)?I(Co(e)):wr(e)}function Ia(){return[]}function ka(){return!1}var Ta=(t=null==t?Wn:Jn.defaults(Wn.Object(),t,Jn.pick(Wn,_n))).Array,Oa=t.Date,Wa=t.Error,Ma=t.Function,ja=t.Math,La=t.Object,Da=t.RegExp,Pa=t.String,Fa=t.TypeError,za=Ta.prototype,Ua=Ma.prototype,$a=La.prototype,Na=t["__core-js_shared__"],Ba=Ua.toString,qa=$a.hasOwnProperty,Ha=0,Va=function(){var e=/[^.]+$/.exec(Na&&Na.keys&&Na.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ga=$a.toString,Ja=Ba.call(La),Za=Wn._,Ka=Da("^"+Ba.call(qa).replace(Wt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ya=Ln?t.Buffer:ie,Qa=t.Symbol,Xa=t.Uint8Array,es=Ya?Ya.allocUnsafe:ie,ts=G(La.getPrototypeOf,La),ns=La.create,rs=$a.propertyIsEnumerable,is=za.splice,os=Qa?Qa.isConcatSpreadable:ie,as=Qa?Qa.iterator:ie,ss=Qa?Qa.toStringTag:ie,us=function(){try{var e=Gi(La,"defineProperty");return e({},"",{}),e}catch(e){}}(),cs=t.clearTimeout!==Wn.clearTimeout&&t.clearTimeout,ls=Oa&&Oa.now!==Wn.Date.now&&Oa.now,fs=t.setTimeout!==Wn.setTimeout&&t.setTimeout,hs=ja.ceil,ps=ja.floor,ds=La.getOwnPropertySymbols,gs=Ya?Ya.isBuffer:ie,vs=t.isFinite,ys=za.join,ms=G(La.keys,La),ws=ja.max,_s=ja.min,bs=Oa.now,Cs=t.parseInt,Ss=ja.random,Es=za.reverse,xs=Gi(t,"DataView"),Rs=Gi(t,"Map"),As=Gi(t,"Promise"),Is=Gi(t,"Set"),ks=Gi(t,"WeakMap"),Ts=Gi(La,"create"),Os=ks&&new ks,Ws={},Ms=So(xs),js=So(Rs),Ls=So(As),Ds=So(Is),Ps=So(ks),Fs=Qa?Qa.prototype:ie,zs=Fs?Fs.valueOf:ie,Us=Fs?Fs.toString:ie,$s=function(){function e(){}return function(t){if(!ea(t))return{};if(ns)return ns(t);e.prototype=t;var n=new e;return e.prototype=ie,n}}();n.templateSettings={escape:xt,evaluate:Rt,interpolate:At,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,i.prototype=$s(r.prototype),i.prototype.constructor=i,_.prototype=$s(r.prototype),_.prototype.constructor=_,k.prototype.clear=function(){this.__data__=Ts?Ts(null):{},this.size=0},k.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},k.prototype.get=function(e){var t=this.__data__;if(Ts){var n=t[e];return n===ue?ie:n}return qa.call(t,e)?t[e]:ie},k.prototype.has=function(e){var t=this.__data__;return Ts?t[e]!==ie:qa.call(t,e)},k.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ts&&t===ie?ue:t,this},Y.prototype.clear=function(){this.__data__=[],this.size=0},Y.prototype.delete=function(e){var t=this.__data__,n=on(t,e);return!(n<0||(n==t.length-1?t.pop():is.call(t,n,1),--this.size,0))},Y.prototype.get=function(e){var t=this.__data__,n=on(t,e);return n<0?ie:t[n][1]},Y.prototype.has=function(e){return on(this.__data__,e)>-1},Y.prototype.set=function(e,t){var n=this.__data__,r=on(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},te.prototype.clear=function(){this.size=0,this.__data__={hash:new k,map:new(Rs||Y),string:new k}},te.prototype.delete=function(e){var t=Hi(this,e).delete(e);return this.size-=t?1:0,t},te.prototype.get=function(e){return Hi(this,e).get(e)},te.prototype.has=function(e){return Hi(this,e).has(e)},te.prototype.set=function(e,t){var n=Hi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},ne.prototype.add=ne.prototype.push=function(e){return this.__data__.set(e,ue),this},ne.prototype.has=function(e){return this.__data__.has(e)},Ut.prototype.clear=function(){this.__data__=new Y,this.size=0},Ut.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ut.prototype.get=function(e){return this.__data__.get(e)},Ut.prototype.has=function(e){return this.__data__.has(e)},Ut.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Y){var r=n.__data__;if(!Rs||r.length<oe-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new te(r)}return n.set(e,t),this.size=n.size,this};var Ns=hi(Tn),Bs=hi(On,!0),qs=pi(),Hs=pi(!0),Vs=Os?function(e,t){return Os.set(e,t),e}:Sa,Gs=us?function(e,t){return us(e,"toString",{configurable:!0,enumerable:!1,value:Ca(t),writable:!0})}:Sa,Js=xr,Zs=cs||function(e){return Wn.clearTimeout(e)},Ks=Is&&1/Z(new Is([,-0]))[1]==We?function(e){return new Is(e)}:Ra,Ys=Os?function(e){return Os.get(e)}:Ra,Qs=ds?function(e){return null==e?[]:(e=La(e),h(ds(e),function(t){return rs.call(e,t)}))}:Ia,Xs=ds?function(e){for(var t=[];e;)v(t,Qs(e)),e=ts(e);return t}:Ia,eu=Pn;(xs&&eu(new xs(new ArrayBuffer(1)))!=ut||Rs&&eu(new Rs)!=Ze||As&&"[object Promise]"!=eu(As.resolve())||Is&&eu(new Is)!=tt||ks&&eu(new ks)!=ot)&&(eu=function(e){var t=Pn(e),n=t==Qe?e.constructor:ie,r=n?So(n):"";if(r)switch(r){case Ms:return ut;case js:return Ze;case Ls:return"[object Promise]";case Ds:return tt;case Ps:return ot}return t});var tu=Na?Yo:ka,nu=_o(Vs),ru=fs||function(e,t){return Wn.setTimeout(e,t)},iu=_o(Gs),ou=function(e){var t=Ho(e,function(e){return n.size===ce&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return Tt.test(e)&&t.push(""),e.replace(Ot,function(e,n,r,i){t.push(r?i.replace($t,"$1"):n||e)}),t}),au=xr(function(e,t){return Zo(e)?mn(e,An(t,1,Zo,!0)):[]}),su=xr(function(e,t){var n=To(t);return Zo(n)&&(n=ie),Zo(e)?mn(e,An(t,1,Zo,!0),qi(n,2)):[]}),uu=xr(function(e,t){var n=To(t);return Zo(n)&&(n=ie),Zo(e)?mn(e,An(t,1,Zo,!0),ie,n):[]}),cu=xr(function(e){var t=g(e,qr);return t.length&&t[0]===e[0]?Qn(t):[]}),lu=xr(function(e){var t=To(e),n=g(e,qr);return t===To(n)?t=ie:n.pop(),n.length&&n[0]===e[0]?Qn(n,qi(t,2)):[]}),fu=xr(function(e){var t=To(e),n=g(e,qr);return(t="function"==typeof t?t:ie)&&n.pop(),n.length&&n[0]===e[0]?Qn(n,ie,t):[]}),hu=xr(Oo),pu=zi(function(e,t){var n=null==e?0:e.length,r=ln(e,t);return br(e,g(t,function(e){return ro(e,n)?+e:e}).sort(ni)),r}),du=xr(function(e){return Pr(An(e,1,Zo,!0))}),gu=xr(function(e){var t=To(e);return Zo(t)&&(t=ie),Pr(An(e,1,Zo,!0),qi(t,2))}),vu=xr(function(e){var t=To(e);return t="function"==typeof t?t:ie,Pr(An(e,1,Zo,!0),ie,t)}),yu=xr(function(e,t){return Zo(e)?mn(e,t):[]}),mu=xr(function(e){return Nr(h(e,Zo))}),wu=xr(function(e){var t=To(e);return Zo(t)&&(t=ie),Nr(h(e,Zo),qi(t,2))}),_u=xr(function(e){var t=To(e);return t="function"==typeof t?t:ie,Nr(h(e,Zo),ie,t)}),bu=xr(Mo),Cu=xr(function(e){var t=e.length,n=t>1?e[t-1]:ie;return n="function"==typeof n?(e.pop(),n):ie,jo(e,n)}),Su=zi(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return ln(t,e)};return!(t>1||this.__actions__.length)&&r instanceof _&&ro(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:Do,args:[o],thisArg:ie}),new i(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(ie),e})):this.thru(o)}),Eu=li(function(e,t,n){qa.call(e,n)?++e[n]:cn(e,n,1)}),xu=wi(Ro),Ru=wi(Ao),Au=li(function(e,t,n){qa.call(e,n)?e[n].push(t):cn(e,n,[t])}),Iu=xr(function(e,t,n){var r=-1,i="function"==typeof t,o=Jo(e)?Ta(e.length):[];return Ns(e,function(e){o[++r]=i?s(t,e,n):er(e,t,n)}),o}),ku=li(function(e,t,n){cn(e,n,t)}),Tu=li(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Ou=xr(function(e,t){if(null==e)return[];var n=t.length;return n>1&&io(e,t[0],t[1])?t=[]:n>2&&io(t[0],t[1],t[2])&&(t=[t[0]]),vr(e,An(t,1),[])}),Wu=ls||function(){return Wn.Date.now()},Mu=xr(function(e,t,n){var r=ve;if(n.length){var i=J(n,Bi(Mu));r|=be}return Wi(e,r,t,n,i)}),ju=xr(function(e,t,n){var r=ve|ye;if(n.length){var i=J(n,Bi(ju));r|=be}return Wi(t,r,e,n,i)}),Lu=xr(function(e,t){return yn(e,1,t)}),Du=xr(function(e,t,n){return yn(e,la(t)||0,n)});Ho.Cache=te;var Pu=Js(function(e,t){var n=(t=1==t.length&&qu(t[0])?g(t[0],L(qi())):g(An(t,1),L(qi()))).length;return xr(function(r){for(var i=-1,o=_s(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return s(e,this,r)})}),Fu=xr(function(e,t){var n=J(t,Bi(Fu));return Wi(e,be,ie,t,n)}),zu=xr(function(e,t){var n=J(t,Bi(zu));return Wi(e,Ce,ie,t,n)}),Uu=zi(function(e,t){return Wi(e,Ee,ie,ie,ie,t)}),$u=Ii(qn),Nu=Ii(function(e,t){return e>=t}),Bu=tr(function(){return arguments}())?tr:function(e){return ta(e)&&qa.call(e,"callee")&&!rs.call(e,"callee")},qu=Ta.isArray,Hu=Fn?L(Fn):function(e){return ta(e)&&Pn(e)==st},Vu=gs||ka,Gu=zn?L(zn):function(e){return ta(e)&&Pn(e)==qe},Ju=Un?L(Un):function(e){return ta(e)&&eu(e)==Ze},Zu=$n?L($n):function(e){return ta(e)&&Pn(e)==et},Ku=Nn?L(Nn):function(e){return ta(e)&&eu(e)==tt},Yu=Bn?L(Bn):function(e){return ta(e)&&Xo(e.length)&&!!Cn[Pn(e)]},Qu=Ii(cr),Xu=Ii(function(e,t){return e<=t}),ec=fi(function(e,t){if(co(t)||Jo(t))si(t,ga(t),e);else for(var n in t)qa.call(t,n)&&rn(e,n,t[n])}),tc=fi(function(e,t){si(t,va(t),e)}),nc=fi(function(e,t,n,r){si(t,va(t),e,r)}),rc=fi(function(e,t,n,r){si(t,ga(t),e,r)}),ic=zi(ln),oc=xr(function(e){return e.push(ie,Mi),s(nc,ie,e)}),ac=xr(function(e){return e.push(ie,ji),s(fc,ie,e)}),sc=Ci(function(e,t,n){e[t]=n},Ca(Sa)),uc=Ci(function(e,t,n){qa.call(e,t)?e[t].push(n):e[t]=[n]},qi),cc=xr(er),lc=fi(function(e,t,n){pr(e,t,n)}),fc=fi(function(e,t,n,r){pr(e,t,n,r)}),hc=zi(function(e,t){var n={};if(null==e)return n;var r=!1;t=g(t,function(t){return t=Vr(t,e),r||(r=t.length>1),t}),si(e,$i(e),n),r&&(n=hn(n,fe|he|pe,Li));for(var i=t.length;i--;)Fr(n,t[i]);return n}),pc=zi(function(e,t){return null==e?{}:yr(e,t)}),dc=Oi(ga),gc=Oi(va),vc=vi(function(e,t,n){return t=t.toLowerCase(),e+(n?wa(t):t)}),yc=vi(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),mc=vi(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),wc=gi("toLowerCase"),_c=vi(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),bc=vi(function(e,t,n){return e+(n?" ":"")+Sc(t)}),Cc=vi(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Sc=gi("toUpperCase"),Ec=xr(function(e,t){try{return s(e,ie,t)}catch(e){return Ko(e)?e:new Wa(e)}}),xc=zi(function(e,t){return c(t,function(t){t=Co(t),cn(e,t,Mu(e[t],e))}),e}),Rc=_i(),Ac=_i(!0),Ic=xr(function(e,t){return function(n){return er(n,e,t)}}),kc=xr(function(e,t){return function(n){return er(e,n,t)}}),Tc=Ei(g),Oc=Ei(f),Wc=Ei(w),Mc=Ai(),jc=Ai(!0),Lc=Si(function(e,t){return e+t},0),Dc=Ti("ceil"),Pc=Si(function(e,t){return e/t},1),Fc=Ti("floor"),zc=Si(function(e,t){return e*t},1),Uc=Ti("round"),$c=Si(function(e,t){return e-t},0);return n.after=function(e,t){if("function"!=typeof t)throw new Fa(se);return e=ua(e),function(){if(--e<1)return t.apply(this,arguments)}},n.ary=Uo,n.assign=ec,n.assignIn=tc,n.assignInWith=nc,n.assignWith=rc,n.at=ic,n.before=$o,n.bind=Mu,n.bindAll=xc,n.bindKey=ju,n.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return qu(e)?e:[e]},n.chain=Lo,n.chunk=function(e,t,n){t=(n?io(e,t,n):t===ie)?1:ws(ua(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,a=Ta(hs(r/t));i<r;)a[o++]=Tr(e,i,i+=t);return a},n.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},n.concat=function(){var e=arguments.length;if(!e)return[];for(var t=Ta(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return v(qu(n)?ai(n):[n],An(t,1))},n.cond=function(e){var t=null==e?0:e.length,n=qi();return e=t?g(e,function(e){if("function"!=typeof e[1])throw new Fa(se);return[n(e[0]),e[1]]}):[],xr(function(n){for(var r=-1;++r<t;){var i=e[r];if(s(i[0],this,n))return s(i[1],this,n)}})},n.conforms=function(e){return pn(hn(e,fe))},n.constant=Ca,n.countBy=Eu,n.create=function(e,t){var n=$s(e);return null==t?n:sn(n,t)},n.curry=No,n.curryRight=Bo,n.debounce=qo,n.defaults=oc,n.defaultsDeep=ac,n.defer=Lu,n.delay=Du,n.difference=au,n.differenceBy=su,n.differenceWith=uu,n.drop=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===ie?1:ua(t),Tr(e,t<0?0:t,r)):[]},n.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===ie?1:ua(t),t=r-t,Tr(e,0,t<0?0:t)):[]},n.dropRightWhile=function(e,t){return e&&e.length?Ur(e,qi(t,3),!0,!0):[]},n.dropWhile=function(e,t){return e&&e.length?Ur(e,qi(t,3),!0):[]},n.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&io(e,t,n)&&(n=0,r=i),xn(e,t,n,r)):[]},n.filter=function(e,t){return(qu(e)?h:Rn)(e,qi(t,3))},n.flatMap=function(e,t){return An(zo(e,t),1)},n.flatMapDeep=function(e,t){return An(zo(e,t),We)},n.flatMapDepth=function(e,t,n){return n=n===ie?1:ua(n),An(zo(e,t),n)},n.flatten=Io,n.flattenDeep=function(e){return(null==e?0:e.length)?An(e,We):[]},n.flattenDepth=function(e,t){return(null==e?0:e.length)?(t=t===ie?1:ua(t),An(e,t)):[]},n.flip=function(e){return Wi(e,xe)},n.flow=Rc,n.flowRight=Ac,n.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},n.functions=function(e){return null==e?[]:Mn(e,ga(e))},n.functionsIn=function(e){return null==e?[]:Mn(e,va(e))},n.groupBy=Au,n.initial=function(e){return(null==e?0:e.length)?Tr(e,0,-1):[]},n.intersection=cu,n.intersectionBy=lu,n.intersectionWith=fu,n.invert=sc,n.invertBy=uc,n.invokeMap=Iu,n.iteratee=Ea,n.keyBy=ku,n.keys=ga,n.keysIn=va,n.map=zo,n.mapKeys=function(e,t){var n={};return t=qi(t,3),Tn(e,function(e,r,i){cn(n,t(e,r,i),e)}),n},n.mapValues=function(e,t){var n={};return t=qi(t,3),Tn(e,function(e,r,i){cn(n,r,t(e,r,i))}),n},n.matches=function(e){return fr(hn(e,fe))},n.matchesProperty=function(e,t){return hr(e,hn(t,fe))},n.memoize=Ho,n.merge=lc,n.mergeWith=fc,n.method=Ic,n.methodOf=kc,n.mixin=xa,n.negate=Vo,n.nthArg=function(e){return e=ua(e),xr(function(t){return gr(t,e)})},n.omit=hc,n.omitBy=function(e,t){return ya(e,Vo(qi(t)))},n.once=function(e){return $o(2,e)},n.orderBy=function(e,t,n,r){return null==e?[]:(qu(t)||(t=null==t?[]:[t]),n=r?ie:n,qu(n)||(n=null==n?[]:[n]),vr(e,t,n))},n.over=Tc,n.overArgs=Pu,n.overEvery=Oc,n.overSome=Wc,n.partial=Fu,n.partialRight=zu,n.partition=Tu,n.pick=pc,n.pickBy=ya,n.property=Aa,n.propertyOf=function(e){return function(t){return null==e?ie:jn(e,t)}},n.pull=hu,n.pullAll=Oo,n.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?_r(e,t,qi(n,2)):e},n.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?_r(e,t,ie,n):e},n.pullAt=pu,n.range=Mc,n.rangeRight=jc,n.rearg=Uu,n.reject=function(e,t){return(qu(e)?h:Rn)(e,Vo(qi(t,3)))},n.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=qi(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return br(e,i),n},n.rest=function(e,t){if("function"!=typeof e)throw new Fa(se);return t=t===ie?t:ua(t),xr(e,t)},n.reverse=Wo,n.sampleSize=function(e,t,n){return t=(n?io(e,t,n):t===ie)?1:ua(t),(qu(e)?en:Ar)(e,t)},n.set=function(e,t,n){return null==e?e:Ir(e,t,n)},n.setWith=function(e,t,n,r){return r="function"==typeof r?r:ie,null==e?e:Ir(e,t,n,r)},n.shuffle=function(e){return(qu(e)?tn:kr)(e)},n.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&io(e,t,n)?(t=0,n=r):(t=null==t?0:ua(t),n=n===ie?r:ua(n)),Tr(e,t,n)):[]},n.sortBy=Ou,n.sortedUniq=function(e){return e&&e.length?jr(e):[]},n.sortedUniqBy=function(e,t){return e&&e.length?jr(e,qi(t,2)):[]},n.split=function(e,t,n){return n&&"number"!=typeof n&&io(e,t,n)&&(t=n=ie),(n=n===ie?De:n>>>0)?(e=ha(e))&&("string"==typeof t||null!=t&&!Zu(t))&&!(t=Dr(t))&&B(e)?Gr(ee(e),0,n):e.split(t,n):[]},n.spread=function(e,t){if("function"!=typeof e)throw new Fa(se);return t=null==t?0:ws(ua(t),0),xr(function(n){var r=n[t],i=Gr(n,0,t);return r&&v(i,r),s(e,this,i)})},n.tail=function(e){var t=null==e?0:e.length;return t?Tr(e,1,t):[]},n.take=function(e,t,n){return e&&e.length?(t=n||t===ie?1:ua(t),Tr(e,0,t<0?0:t)):[]},n.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===ie?1:ua(t),t=r-t,Tr(e,t<0?0:t,r)):[]},n.takeRightWhile=function(e,t){return e&&e.length?Ur(e,qi(t,3),!1,!0):[]},n.takeWhile=function(e,t){return e&&e.length?Ur(e,qi(t,3)):[]},n.tap=function(e,t){return t(e),e},n.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Fa(se);return ea(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),qo(e,t,{leading:r,maxWait:t,trailing:i})},n.thru=Do,n.toArray=aa,n.toPairs=dc,n.toPairsIn=gc,n.toPath=function(e){return qu(e)?g(e,Co):oa(e)?[e]:ai(ou(ha(e)))},n.toPlainObject=fa,n.transform=function(e,t,n){var r=qu(e),i=r||Vu(e)||Yu(e);if(t=qi(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ea(e)&&Yo(o)?$s(ts(e)):{}}return(i?c:Tn)(e,function(e,r,i){return t(n,e,r,i)}),n},n.unary=function(e){return Uo(e,1)},n.union=du,n.unionBy=gu,n.unionWith=vu,n.uniq=function(e){return e&&e.length?Pr(e):[]},n.uniqBy=function(e,t){return e&&e.length?Pr(e,qi(t,2)):[]},n.uniqWith=function(e,t){return t="function"==typeof t?t:ie,e&&e.length?Pr(e,ie,t):[]},n.unset=function(e,t){return null==e||Fr(e,t)},n.unzip=Mo,n.unzipWith=jo,n.update=function(e,t,n){return null==e?e:zr(e,t,Hr(n))},n.updateWith=function(e,t,n,r){return r="function"==typeof r?r:ie,null==e?e:zr(e,t,Hr(n),r)},n.values=ma,n.valuesIn=function(e){return null==e?[]:D(e,va(e))},n.without=yu,n.words=ba,n.wrap=function(e,t){return Fu(Hr(t),e)},n.xor=mu,n.xorBy=wu,n.xorWith=_u,n.zip=bu,n.zipObject=function(e,t){return Br(e||[],t||[],rn)},n.zipObjectDeep=function(e,t){return Br(e||[],t||[],Ir)},n.zipWith=Cu,n.entries=dc,n.entriesIn=gc,n.extend=tc,n.extendWith=nc,xa(n,n),n.add=Lc,n.attempt=Ec,n.camelCase=vc,n.capitalize=wa,n.ceil=Dc,n.clamp=function(e,t,n){return n===ie&&(n=t,t=ie),n!==ie&&(n=(n=la(n))===n?n:0),t!==ie&&(t=(t=la(t))===t?t:0),fn(la(e),t,n)},n.clone=function(e){return hn(e,pe)},n.cloneDeep=function(e){return hn(e,fe|pe)},n.cloneDeepWith=function(e,t){return t="function"==typeof t?t:ie,hn(e,fe|pe,t)},n.cloneWith=function(e,t){return t="function"==typeof t?t:ie,hn(e,pe,t)},n.conformsTo=function(e,t){return null==t||vn(e,t,ga(t))},n.deburr=_a,n.defaultTo=function(e,t){return null==e||e!==e?t:e},n.divide=Pc,n.endsWith=function(e,t,n){e=ha(e),t=Dr(t);var r=e.length,i=n=n===ie?r:fn(ua(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},n.eq=Go,n.escape=function(e){return(e=ha(e))&&Et.test(e)?e.replace(Ct,Vn):e},n.escapeRegExp=function(e){return(e=ha(e))&&Mt.test(e)?e.replace(Wt,"\\$&"):e},n.every=function(e,t,n){var r=qu(e)?f:wn;return n&&io(e,t,n)&&(t=ie),r(e,qi(t,3))},n.find=xu,n.findIndex=Ro,n.findKey=function(e,t){return C(e,qi(t,3),Tn)},n.findLast=Ru,n.findLastIndex=Ao,n.findLastKey=function(e,t){return C(e,qi(t,3),On)},n.floor=Fc,n.forEach=Po,n.forEachRight=Fo,n.forIn=function(e,t){return null==e?e:qs(e,qi(t,3),va)},n.forInRight=function(e,t){return null==e?e:Hs(e,qi(t,3),va)},n.forOwn=function(e,t){return e&&Tn(e,qi(t,3))},n.forOwnRight=function(e,t){return e&&On(e,qi(t,3))},n.get=pa,n.gt=$u,n.gte=Nu,n.has=function(e,t){return null!=e&&Yi(e,t,Zn)},n.hasIn=da,n.head=ko,n.identity=Sa,n.includes=function(e,t,n,r){e=Jo(e)?e:ma(e),n=n&&!r?ua(n):0;var i=e.length;return n<0&&(n=ws(i+n,0)),ia(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&E(e,t,n)>-1},n.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ua(n);return i<0&&(i=ws(r+i,0)),E(e,t,i)},n.inRange=function(e,t,n){return t=sa(t),n===ie?(n=t,t=0):n=sa(n),e=la(e),Yn(e,t,n)},n.invoke=cc,n.isArguments=Bu,n.isArray=qu,n.isArrayBuffer=Hu,n.isArrayLike=Jo,n.isArrayLikeObject=Zo,n.isBoolean=function(e){return!0===e||!1===e||ta(e)&&Pn(e)==Be},n.isBuffer=Vu,n.isDate=Gu,n.isElement=function(e){return ta(e)&&1===e.nodeType&&!ra(e)},n.isEmpty=function(e){if(null==e)return!0;if(Jo(e)&&(qu(e)||"string"==typeof e||"function"==typeof e.splice||Vu(e)||Yu(e)||Bu(e)))return!e.length;var t=eu(e);if(t==Ze||t==tt)return!e.size;if(co(e))return!sr(e).length;for(var n in e)if(qa.call(e,n))return!1;return!0},n.isEqual=function(e,t){return nr(e,t)},n.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:ie)?n(e,t):ie;return r===ie?nr(e,t,ie,n):!!r},n.isError=Ko,n.isFinite=function(e){return"number"==typeof e&&vs(e)},n.isFunction=Yo,n.isInteger=Qo,n.isLength=Xo,n.isMap=Ju,n.isMatch=function(e,t){return e===t||ir(e,t,Vi(t))},n.isMatchWith=function(e,t,n){return n="function"==typeof n?n:ie,ir(e,t,Vi(t),n)},n.isNaN=function(e){return na(e)&&e!=+e},n.isNative=function(e){if(tu(e))throw new Wa(ae);return or(e)},n.isNil=function(e){return null==e},n.isNull=function(e){return null===e},n.isNumber=na,n.isObject=ea,n.isObjectLike=ta,n.isPlainObject=ra,n.isRegExp=Zu,n.isSafeInteger=function(e){return Qo(e)&&e>=-Me&&e<=Me},n.isSet=Ku,n.isString=ia,n.isSymbol=oa,n.isTypedArray=Yu,n.isUndefined=function(e){return e===ie},n.isWeakMap=function(e){return ta(e)&&eu(e)==ot},n.isWeakSet=function(e){return ta(e)&&Pn(e)==at},n.join=function(e,t){return null==e?"":ys.call(e,t)},n.kebabCase=yc,n.last=To,n.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==ie&&(i=(i=ua(n))<0?ws(r+i,0):_s(i,r-1)),t===t?Q(e,t,i):S(e,R,i,!0)},n.lowerCase=mc,n.lowerFirst=wc,n.lt=Qu,n.lte=Xu,n.max=function(e){return e&&e.length?En(e,Sa,qn):ie},n.maxBy=function(e,t){return e&&e.length?En(e,qi(t,2),qn):ie},n.mean=function(e){return A(e,Sa)},n.meanBy=function(e,t){return A(e,qi(t,2))},n.min=function(e){return e&&e.length?En(e,Sa,cr):ie},n.minBy=function(e,t){return e&&e.length?En(e,qi(t,2),cr):ie},n.stubArray=Ia,n.stubFalse=ka,n.stubObject=function(){return{}},n.stubString=function(){return""},n.stubTrue=function(){return!0},n.multiply=zc,n.nth=function(e,t){return e&&e.length?gr(e,ua(t)):ie},n.noConflict=function(){return Wn._===this&&(Wn._=Za),this},n.noop=Ra,n.now=Wu,n.pad=function(e,t,n){e=ha(e);var r=(t=ua(t))?X(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return xi(ps(i),n)+e+xi(hs(i),n)},n.padEnd=function(e,t,n){e=ha(e);var r=(t=ua(t))?X(e):0;return t&&r<t?e+xi(t-r,n):e},n.padStart=function(e,t,n){e=ha(e);var r=(t=ua(t))?X(e):0;return t&&r<t?xi(t-r,n)+e:e},n.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Cs(ha(e).replace(Lt,""),t||0)},n.random=function(e,t,n){if(n&&"boolean"!=typeof n&&io(e,t,n)&&(t=n=ie),n===ie&&("boolean"==typeof t?(n=t,t=ie):"boolean"==typeof e&&(n=e,e=ie)),e===ie&&t===ie?(e=0,t=1):(e=sa(e),t===ie?(t=e,e=0):t=sa(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Ss();return _s(e+i*(t-e+In("1e-"+((i+"").length-1))),t)}return Cr(e,t)},n.reduce=function(e,t,n){var r=qu(e)?y:T,i=arguments.length<3;return r(e,qi(t,4),n,i,Ns)},n.reduceRight=function(e,t,n){var r=qu(e)?m:T,i=arguments.length<3;return r(e,qi(t,4),n,i,Bs)},n.repeat=function(e,t,n){return t=(n?io(e,t,n):t===ie)?1:ua(t),Er(ha(e),t)},n.replace=function(){var e=arguments,t=ha(e[0]);return e.length<3?t:t.replace(e[1],e[2])},n.result=function(e,t,n){var r=-1,i=(t=Vr(t,e)).length;for(i||(i=1,e=ie);++r<i;){var o=null==e?ie:e[Co(t[r])];o===ie&&(r=i,o=n),e=Yo(o)?o.call(e):o}return e},n.round=Uc,n.runInContext=e,n.sample=function(e){return(qu(e)?Xt:Rr)(e)},n.size=function(e){if(null==e)return 0;if(Jo(e))return ia(e)?X(e):e.length;var t=eu(e);return t==Ze||t==tt?e.size:sr(e).length},n.snakeCase=_c,n.some=function(e,t,n){var r=qu(e)?w:Or;return n&&io(e,t,n)&&(t=ie),r(e,qi(t,3))},n.sortedIndex=function(e,t){return Wr(e,t)},n.sortedIndexBy=function(e,t,n){return Mr(e,t,qi(n,2))},n.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Wr(e,t);if(r<n&&Go(e[r],t))return r}return-1},n.sortedLastIndex=function(e,t){return Wr(e,t,!0)},n.sortedLastIndexBy=function(e,t,n){return Mr(e,t,qi(n,2),!0)},n.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Wr(e,t,!0)-1;if(Go(e[n],t))return n}return-1},n.startCase=bc,n.startsWith=function(e,t,n){return e=ha(e),n=null==n?0:fn(ua(n),0,e.length),t=Dr(t),e.slice(n,n+t.length)==t},n.subtract=$c,n.sum=function(e){return e&&e.length?W(e,Sa):0},n.sumBy=function(e,t){return e&&e.length?W(e,qi(t,2)):0},n.template=function(e,t,r){var i=n.templateSettings;r&&io(e,t,r)&&(t=ie),e=ha(e),t=nc({},t,i,Mi);var o,a,s=nc({},t.imports,i.imports,Mi),u=ga(s),c=D(s,u),l=0,f=t.interpolate||Kt,h="__p += '",p=Da((t.escape||Kt).source+"|"+f.source+"|"+(f===At?Nt:Kt).source+"|"+(t.evaluate||Kt).source+"|$","g"),d="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++bn+"]")+"\n";e.replace(p,function(t,n,r,i,s,u){return r||(r=i),h+=e.slice(l,u).replace(Yt,$),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t}),h+="';\n";var g=t.variable;g||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(mt,""):h).replace(wt,"$1").replace(_t,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=Ec(function(){return Ma(u,d+"return "+h).apply(ie,c)});if(v.source=h,Ko(v))throw v;return v},n.times=function(e,t){if((e=ua(e))<1||e>Me)return[];var n=De,r=_s(e,De);t=qi(t),e-=De;for(var i=M(r,t);++n<e;)t(n);return i},n.toFinite=sa,n.toInteger=ua,n.toLength=ca,n.toLower=function(e){return ha(e).toLowerCase()},n.toNumber=la,n.toSafeInteger=function(e){return e?fn(ua(e),-Me,Me):0===e?e:0},n.toString=ha,n.toUpper=function(e){return ha(e).toUpperCase()},n.trim=function(e,t,n){if((e=ha(e))&&(n||t===ie))return e.replace(jt,"");if(!e||!(t=Dr(t)))return e;var r=ee(e),i=ee(t);return Gr(r,F(r,i),z(r,i)+1).join("")},n.trimEnd=function(e,t,n){if((e=ha(e))&&(n||t===ie))return e.replace(Dt,"");if(!e||!(t=Dr(t)))return e;var r=ee(e);return Gr(r,0,z(r,ee(t))+1).join("")},n.trimStart=function(e,t,n){if((e=ha(e))&&(n||t===ie))return e.replace(Lt,"");if(!e||!(t=Dr(t)))return e;var r=ee(e);return Gr(r,F(r,ee(t))).join("")},n.truncate=function(e,t){var n=Re,r=Ae;if(ea(t)){var i="separator"in t?t.separator:i;n="length"in t?ua(t.length):n,r="omission"in t?Dr(t.omission):r}var o=(e=ha(e)).length;if(B(e)){var a=ee(e);o=a.length}if(n>=o)return e;var s=n-X(r);if(s<1)return r;var u=a?Gr(a,0,s).join(""):e.slice(0,s);if(i===ie)return u+r;if(a&&(s+=u.length-s),Zu(i)){if(e.slice(s).search(i)){var c,l=u;for(i.global||(i=Da(i.source,ha(Bt.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;u=u.slice(0,f===ie?s:f)}}else if(e.indexOf(Dr(i),s)!=s){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+r},n.unescape=function(e){return(e=ha(e))&&St.test(e)?e.replace(bt,Gn):e},n.uniqueId=function(e){var t=++Ha;return ha(e)+t},n.upperCase=Cc,n.upperFirst=Sc,n.each=Po,n.eachRight=Fo,n.first=ko,xa(n,function(){var e={};return Tn(n,function(t,r){qa.call(n.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),n.VERSION="4.17.4",c(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){n[e].placeholder=n}),c(["drop","take"],function(e,t){_.prototype[e]=function(n){n=n===ie?1:ws(ua(n),0);var r=this.__filtered__&&!t?new _(this):this.clone();return r.__filtered__?r.__takeCount__=_s(n,r.__takeCount__):r.__views__.push({size:_s(n,De),type:e+(r.__dir__<0?"Right":"")}),r},_.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),c(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==Te||3==n;_.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:qi(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),c(["head","last"],function(e,t){var n="take"+(t?"Right":"");_.prototype[e]=function(){return this[n](1).value()[0]}}),c(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");_.prototype[e]=function(){return this.__filtered__?new _(this):this[n](1)}}),_.prototype.compact=function(){return this.filter(Sa)},_.prototype.find=function(e){return this.filter(e).head()},_.prototype.findLast=function(e){return this.reverse().find(e)},_.prototype.invokeMap=xr(function(e,t){return"function"==typeof e?new _(this):this.map(function(n){return er(n,e,t)})}),_.prototype.reject=function(e){return this.filter(Vo(qi(e)))},_.prototype.slice=function(e,t){e=ua(e);var n=this;return n.__filtered__&&(e>0||t<0)?new _(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==ie&&(n=(t=ua(t))<0?n.dropRight(-t):n.take(t-e)),n)},_.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},_.prototype.toArray=function(){return this.take(De)},Tn(_.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),a=n[o?"take"+("last"==t?"Right":""):t],s=o||/^find/.test(t);a&&(n.prototype[t]=function(){var t=this.__wrapped__,u=o?[1]:arguments,c=t instanceof _,l=u[0],f=c||qu(t),h=function(e){var t=a.apply(n,v([e],u));return o&&p?t[0]:t};f&&r&&"function"==typeof l&&1!=l.length&&(c=f=!1);var p=this.__chain__,d=!!this.__actions__.length,g=s&&!p,y=c&&!d;if(!s&&f){t=y?t:new _(this);var m=e.apply(t,u);return m.__actions__.push({func:Do,args:[h],thisArg:ie}),new i(m,p)}return g&&y?e.apply(this,u):(m=this.thru(h),g?o?m.value()[0]:m.value():m)})}),c(["pop","push","shift","sort","splice","unshift"],function(e){var t=za[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);n.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var n=this.value();return t.apply(qu(n)?n:[],e)}return this[r](function(n){return t.apply(qu(n)?n:[],e)})}}),Tn(_.prototype,function(e,t){var r=n[t];if(r){var i=r.name+"";(Ws[i]||(Ws[i]=[])).push({name:t,func:r})}}),Ws[bi(ie,ye).name]=[{name:"wrapper",func:ie}],_.prototype.clone=function(){var e=new _(this.__wrapped__);return e.__actions__=ai(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ai(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ai(this.__views__),e},_.prototype.reverse=function(){if(this.__filtered__){var e=new _(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},_.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=qu(e),r=t<0,i=n?e.length:0,o=Zi(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,h=0,p=_s(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return $r(e,this.__actions__);var d=[];e:for(;u--&&h<p;){for(var g=-1,v=e[c+=t];++g<f;){var y=l[g],m=y.iteratee,w=y.type,_=m(v);if(w==Oe)v=_;else if(!_){if(w==Te)continue e;break e}}d[h++]=v}return d},n.prototype.at=Su,n.prototype.chain=function(){return Lo(this)},n.prototype.commit=function(){return new i(this.value(),this.__chain__)},n.prototype.next=function(){this.__values__===ie&&(this.__values__=aa(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?ie:this.__values__[this.__index__++]}},n.prototype.plant=function(e){for(var t,n=this;n instanceof r;){var i=xo(n);i.__index__=0,i.__values__=ie,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t},n.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof _){var t=e;return this.__actions__.length&&(t=new _(this)),(t=t.reverse()).__actions__.push({func:Do,args:[Wo],thisArg:ie}),new i(t,this.__chain__)}return this.thru(Wo)},n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=function(){return $r(this.__wrapped__,this.__actions__)},n.prototype.first=n.prototype.head,as&&(n.prototype[as]=function(){return this}),n}();Wn._=Jn,(i=function(){return Jn}.call(t,n,t,r))!==ie&&(r.exports=i)}).call(this)}).call(t,n(24),n(142)(e))},2346:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2347);t.getDefaultRetryStrategy=function(e){var t=(void 0===e?{}:e).timeoutBetweenRetries;return{conditions:[r.shouldRetryOnReloadEvent,r.shouldRetryOnNoSkypeId,r.shouldRetryOnDormant,r.shouldRetryNotExceededAttempts],timeoutBetweenRetries:t||0,recreateTimeout:18e4,maxRecreateAttempts:3}},t.getLinearNetworkErrorRetry=function(e){var t=(void 0===e?{}:e).timeoutBetweenRetries;return{conditions:[r.shouldRetryOnReloadEvent,r.shouldRetryOnNoSkypeId,r.shouldRetryOnDormant,r.shouldRetryOnNetworkError,r.shouldRetryOnNavigateError,r.shouldRetryNotExceededAttempts],timeoutBetweenRetries:t||2e4,recreateTimeout:18e4,maxRecreateAttempts:3}}},2347:function(e,t,n){"use strict";function r(e){var n=this,r=e.logger,i=e.appStateService,o=e.eventingService,u=e.constants,c=e.timeoutBetweenRetries,l=e.scenario;return r.info("Are we connected? "+i.isConnected),new Promise(function(e){return a(n,void 0,void 0,function(){var n;return s(this,function(a){switch(a.label){case 0:return i.isConnected?[4,t.wait(c,r)]:[3,2];case 1:return a.sent(),e(),[2];case 2:return l.pause({reason:"no network"}),n=o.unsafeOn(u.events.appState.changed,function(){i.isConnected&&(l.resume(),r.info("App state updated. We are now connected."),n(),e())}),[2]}})})})}function i(e,t){return e>=t}function o(e,t){return Object.defineProperty(t,"name",{value:e})}var a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},u=this;Object.defineProperty(t,"__esModule",{value:!0}),t.wait=function(e,t){return t.info("Starting to wait for "+e+"ms."),new Promise(function(n){setTimeout(function(){t.info("Done waiting for "+e+"."),n()},e)})},t.shouldRetryOnReloadEvent=o("shouldRetryOnReloadEvent",function(e){var t=e.event,n=e.logger;return a(u,void 0,void 0,function(){return s(this,function(e){return"reloaded"===t.reason?(n.info("Attempting to recreate the experience container after unloading."),[2,{shouldRetry:!0,resetRetryCountAfterRetry:!0}]):[2,{shouldRetry:!1}]})})}),t.shouldRetryOnNoSkypeId=o("shouldRetryOnNoSkypeId",function(e){var n=e.event,r=e.logger,o=e.timeoutBetweenRetries,c=e.retries,l=e.maxRecreateAttempts;return a(u,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return i(c,l)||"no-skype-id"!==n.reason?[3,2]:[4,t.wait(o,r)];case 1:return e.sent(),[2,{shouldRetry:!0}];case 2:return[2,{shouldRetry:!1}]}})})}),t.shouldRetryOnDormant=o("shouldRetryOnDormant",function(e){var t=e.timeElapsed,n=e.recreateTimeout,r=e.logger;return a(u,void 0,void 0,function(){return s(this,function(e){return t>n?(r.info("Attempting to recreate the experience container because the last attempt was made "+t+" ms ago, which is beyond the recreate limit time window: "+n+" ms."),[2,{shouldRetry:!0,resetRetryCountAfterRetry:!0}]):[2,{shouldRetry:!1}]})})}),t.shouldRetryOnNetworkError=o("shouldRetryOnNetworkError",function(e){return a(u,void 0,void 0,function(){var t,n,o,a,u,c;return s(this,function(s){switch(s.label){case 0:return t=e.event,n=e.logger,o=e.resetRetriesOnce,a=e.retries,u=e.maxRecreateAttempts,"failed-to-load"!==t.reason&&"failed-to-load-chunk"!==t.reason?[3,2]:(o(),i(a,u)?[3,2]:(c=t.data&&t.data.statusCode,n.info(t.reason+" - recreating experience container. Status code: "+c),[4,r(e)]));case 1:return s.sent(),[2,{shouldRetry:!0}];case 2:return[2,{shouldRetry:!1}]}})})}),t.shouldRetryOnNavigateError=o("shouldRetryOnNavigateError",function(e){return a(u,void 0,void 0,function(){var n,r,o,a,u,c,l;return s(this,function(s){switch(s.label){case 0:return n=e.event,r=e.logger,o=e.resetRetriesOnce,a=e.retries,u=e.timeoutBetweenRetries,c=e.maxRecreateAttempts,"failed-to-navigate"!==n.reason?[3,2]:(o(),i(a,c)?[3,2]:(l=n.data&&n.data.statusCode,r.info("failed-to-navigate - recreating experience container. Status code: "+l),[4,t.wait(u,r)]));case 1:return s.sent(),[2,{shouldRetry:!0}];case 2:return[2,{shouldRetry:!1}]}})})}),t.shouldRetryNotExceededAttempts=o("shouldRetryNotExceededAttempts",function(e){var n=e.logger,r=e.retries,o=e.timeoutBetweenRetries,c=e.maxRecreateAttempts;return a(u,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return i(r,c)?[3,2]:(n.info("Attempting to recreate the experience container. Attempt #"+r+"."),[4,t.wait(o,n)]);case 1:return e.sent(),[2,{shouldRetry:!0}];case 2:return[2,{shouldRetry:!1}]}})})})},2348:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=n(2349),a=function(e){function t(t,n,r,i,o){var a=e.call(this,t)||this;return a.experienceContainerManager=i,a.experienceContainerFeatureService=o,a.isHidden=!0,a.logger=r.newLogger(""+n.experienceContainers.log.prefix+a.mtmaTelemetryIdentifier()),a.initializeOnAppLaunchAndReinit("constructor"),a}return r(t,e),t.$inject=["orchestrationService","constants","loggingService","experienceContainerManager","experienceContainerFeatureService"],Object.defineProperty(t.prototype,"experienceContainer",{get:function(){return this.experienceContainerManager.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"experienceUiWrap",{get:function(){return this.experienceContainerManager.getUiHandle()},enumerable:!0,configurable:!0}),t.prototype.initializeOnAppLaunchAndReinit=function(e){var t=this;this.logger.log("initializeOnAppLaunchAndReinit, reason: "+e),this.experienceContainerFeatureService.isHybridAppExperienceContainerEnabled()&&(this.resizeObserver=new ResizeObserver(function(e){if(!t.isHidden){var n=e[0].contentRect;t.resizeUtil.setSize(n);var r=t.resizeUtil.getElementStyle(performance.now());$(t.experienceUiWrap).css(r)}}),this.resizeUtil=new o.HybridAppResizeUtil)},t.prototype.mtmaTelemetryIdentifier=function(){return"HybridAppService"},t.prototype.cleanupOnAppTeardown=function(e){this.logger.log("cleanupOnAppTeardown, reason: "+e),this.resizeUtil=void 0,this.resizeSampleElement=void 0,this.isHidden=!0,this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0)},Object.defineProperty(t.prototype,"isReady",{get:function(){return this.experienceContainerManager.isReady},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"retryState",{get:function(){return this.experienceContainerManager.retryState},enumerable:!0,configurable:!0}),t.prototype.onReady=function(e){return this.experienceContainerManager.onReady(e)},t.prototype.collectLogs=function(){return this.experienceContainerManager.collectLogs()},t.prototype.collectLeaks=function(){return this.experienceContainerManager.collectLeaks()},t.prototype.setSettings=function(e){this.sendMessage(e)},t.prototype.setTheme=function(e){this.sendMessage({hostSettings:{theme:e}})},t.prototype.setAppState=function(e){this.sendMessage({hostSettings:{appState:e}})},t.prototype.setLocale=function(e){this.sendMessage({hostSettings:{localeCode:e}})},t.prototype.nudge=function(){this.experienceContainerManager.nudge()},t.prototype.sendCommand=function(e){var t=e.entity,n=e.entityOptions,r=e.command,o={eventId:i.ChildWindowEventRequest.ExecuteEntityCommand,payload:{entity:t,entityOptions:n,command:r}};return this.experienceContainer.postMessage(o)},t.prototype.renderOnElement=function(e,t){var n=this;if(!this.isRenderingOverElementsEnabled())throw teamspace.services.commanding.EntityCommandErrorCode.ExperienceContainerNotEnabled;this.isHidden=!1,t&&this.experienceUiWrap.setAttribute("class","behind overlay"),this.experienceContainer&&this.experienceContainer.focus(),this.setupResizeObserverOnElement(e),t||this.experienceContainer.setTimeout().then(function(){n.experienceUiWrap.setAttribute("class","visible overlay")})},t.prototype.setupResizeObserverOnElement=function(e){this.resizeSampleElement&&this.resizeSampleElement===e||(this.resizeSampleElement&&this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeSampleElement=e,e&&(this.experienceUiWrap.style.width=e.clientWidth+"px",this.experienceUiWrap.style.height=e.clientHeight+"px",this.resizeObserver&&this.resizeObserver.observe(e)))},t.prototype.destroy=function(){this.resizeSampleElement=void 0,this.isHidden=!0,this.experienceUiWrap.setAttribute("class","hidden"),this.resizeObserver&&this.resizeObserver.disconnect()},t.prototype.shouldShowChatNotification=function(e){return this.experienceContainerManager.shouldShowChatNotification(e)},t.prototype.isRenderingOverElementsEnabled=function(){return this.experienceContainer&&this.experienceContainerFeatureService.isHybridAppExperienceContainerEnabled()},t.prototype.sendMessage=function(e){if(this.experienceContainer){var t={eventId:i.ChildWindowEventRequest.UpdateWindowState,payload:e};this.experienceContainer.postMessage(t)}},t}(teamspace.services.MTMABase);t.HybridAppService=a,angular.module("teamspace.hybridAppServiceLazy",["teamspace.constants","teamspace.loggingService","teamspace.orchestrationService","teamspace.experienceContainerManager","teamspace.experienceContainerFeatureService"]).service("hybridAppServiceLazy",a)},2349:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.lastResizeTimestamp=0,this.RESIZE_INTERVAL=16.67}return e.prototype.setSize=function(e){this.height=e.height,this.width=e.width},e.prototype.getElementStyle=function(e){var t=this.getSize(),n=t.width,r=t.height,i=this.lastSetHeight!==n||this.lastSetWidth!==r,o=e-this.lastResizeTimestamp,a="transform 16.67ms ease-in-out, width 16.67ms ease-in-out, height 16.67ms ease-in-out";return i?o>=this.RESIZE_INTERVAL?(this.lastSetHeight=r,this.lastSetWidth=n,this.lastResizeTimestamp=e,{transition:a,transform:"none",width:[n,"px"].join(""),height:[r,"px"].join("")}):{transition:a,transform:"scale("+n/this.lastSetWidth+","+r/this.lastSetHeight+")"}:{transition:a,transform:"none"}},e.prototype.getSize=function(){return{width:this.width,height:this.height}},e}();t.HybridAppResizeUtil=r},236:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),o=n(2337),a=3e4,s=[i.CommandEvent.Close,i.CommandEvent.CommandReportingTimedOut,i.CommandEvent.Failure],u=[i.CommandEvent.Incomplete],c=[i.CommandEvent.Flushed,i.CommandEvent.Focus,i.CommandEvent.NotHandled,i.CommandEvent.Rendered],l=c.concat(u),f=function(e){function t(t,n,r,o,f){var h=e.call(this,t)||this;return h.logger=t,h.elementId=n,h.params=r,h.constants=o,h.$window=f,h.postMessage=function(e){return new Promise(function(t,n){try{h._postMessage(e)}catch(e){h.logger.error("postMessage() failed - elementId={0}: {1}",h.elementId,e),n({error:e,reason:teamspace.services.commanding.EntityCommandErrorCode.SendCommandException})}if(e.payload&&e.payload.command&&e.payload.command.correlation&&e.payload.command.correlation.id){var r=!1,o=!1;h.logger.log("experienceContainer entity command sent: "+JSON.stringify(e.payload));var f=h.logger.service.findScenarioByNameAndId(h.constants.multiWindow.scenario.enqueueEntityCommand,e.payload.command.correlation.id);if(f){var p=teamspace.services.commanding.EntityCommandStep.CommandSent;f.mark(p),f.appendEventData({previousStep:p})}var d=function(a){var f=a.commandEvent,p=a.contentExistsAndHasChanged,g=a.entityCommand,v=a.errorInfo,y=g.command.correlation.id;if(e.payload.command.correlation.id===y)if(y){h.logger.log("CommandEvent Received, correlationId: "+y+", commandEvent: "+f);var m=h.logger.service.findScenarioByNameAndId(h.constants.multiWindow.scenario.enqueueEntityCommand,y);m&&(m.mark(f),m.appendEventData({previousStep:f}));var w=f===i.CommandEvent.RenderStarted&&!1===p;if(o||!l.includes(f)&&!w||(h.logger.log("Resolving enqueueEntityCommand promise, correlationId: "+y+", reason: "+(w?"AlreadyRendered":f)),t(),o=!0),r||!c.includes(f)&&!w||(h.logger.log("Stopping enqueueEntityCommand scenario, correlationId: "+y+", reason: "+f),m&&m.stop({reason:w?"AlreadyRendered":f}),r=!0),!r&&u.includes(f)&&(h.logger.log("Cancelling/Abandoning enqueueEntityCommand scenario, correlationId: "+y+", reason: "+f),m&&m.cancel({reason:f}),r=!0),s.includes(f)){var _=h.getErrorCode(v);h.logger.error("Failing enqueueEntityCommand promise, correlationId: "+y+", reason: "+f+", errorCode: "+_),n(f===i.CommandEvent.Failure?_:f),h.removeEventListener(i.ChildWindowEventRequest.CommandEvent,d)}}else h.logger.error("CommandEvent Received without a valid correlation id, entityCommand: "+g)};h.addEventListener(i.ChildWindowEventRequest.CommandEvent,d),h.$window.setTimeout(function(){h.removeEventListener(i.ChildWindowEventRequest.CommandEvent,d),n(teamspace.services.commanding.EntityCommandErrorCode.TimeoutWaitingForCompletion)},a)}else t()})},h.element=h.createElement(r.url),h}return r(t,e),t.prototype.appendTo=function(e){if(this.element)try{return e.appendChild(this.element),Promise.resolve()}catch(e){return this.logger.error("appendChild() failed - elementId={0}: {1}",this.elementId,e),Promise.reject(this.constants.experienceContainers.reason.ecAppendToError)}return Promise.reject(this.constants.experienceContainers.reason.ecAppendToNoElement)},t.prototype.focus=function(){this.element&&this.element.focus()},t.prototype._handleExperienceContainerEvent=function(e){if(e){if(e.requestRendererId=this.elementId,this.publish("message",e),e.eventId){if(e.eventId===i.ChildWindowEventRequest.ExperienceStarted){var t=e.payload&&e.payload.message,n=e.payload&&e.payload.errorCode;this.logger.info("ExperienceStarted:"+t+" code:"+n),n&&-1==n&&this.publish("failed-to-load-chunk",e)}this.publish(e.eventId,e.payload)}}else this.logger.error("Invalid experience container event - received no args.")},t.prototype.getErrorCode=function(e){switch(e){case"ChunkLoadTimedOut":return teamspace.services.commanding.EntityCommandErrorCode.ChunkLoadTimedOut;case"CSSLoadError":return teamspace.services.commanding.EntityCommandErrorCode.CSSLoadError;case"LazyLoadError":return teamspace.services.commanding.EntityCommandErrorCode.LazyLoadError;case"RenderingError":return teamspace.services.commanding.EntityCommandErrorCode.RenderingError;case"ScriptCodeError":return teamspace.services.commanding.EntityCommandErrorCode.ScriptCodeError;case"ScriptEvalError":return teamspace.services.commanding.EntityCommandErrorCode.ScriptEvalError;case"ScriptLoadError":return teamspace.services.commanding.EntityCommandErrorCode.ScriptLoadError;case"WindowCacheFailedToUpdate":return teamspace.services.commanding.EntityCommandErrorCode.WindowCacheFailedToUpdate;default:return teamspace.services.commanding.EntityCommandErrorCode.UnknownCommandFailure}},t}(o.EventPublisher);t.ExperienceContainer=f},59:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.createDiv=function(e){return this.createElement("div",e)},e.prototype.createWebView=function(e){return this.createElement("webview",e)},e.prototype.createIframe=function(e){return this.createElement("iframe",e)},e.prototype.createElement=function(e,t){var n=document.createElement(e);return n.id=t,n},e}();t.htmlFactory=new r}},[2334]);